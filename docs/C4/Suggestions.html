<html><head><title>C4::Suggestions</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÉ</text></svg>" />

<link rel="stylesheet" href="../sub.css">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.42,
  using Pod::Simple::PullParser v3.42,
  under Perl v5.034000 at Sun Feb 12 01:17:17 2023 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#FUNCTIONS'>FUNCTIONS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#GetSuggestion'>GetSuggestion</a>
    <li class='indexItem indexItem2'><a href='#GetSuggestionFromBiblionumber'>GetSuggestionFromBiblionumber</a>
    <li class='indexItem indexItem2'><a href='#GetSuggestionInfoFromBiblionumber'>GetSuggestionInfoFromBiblionumber</a>
    <li class='indexItem indexItem2'><a href='#GetSuggestionInfo'>GetSuggestionInfo</a>
    <li class='indexItem indexItem2'><a href='#GetSuggestionByStatus'>GetSuggestionByStatus</a>
    <li class='indexItem indexItem2'><a href='#NewSuggestion'>NewSuggestion</a>
    <li class='indexItem indexItem2'><a href='#ModSuggestion'>ModSuggestion</a>
    <li class='indexItem indexItem2'><a href='#ConnectSuggestionAndBiblio'>ConnectSuggestionAndBiblio</a>
    <li class='indexItem indexItem2'><a href='#DelSuggestion'>DelSuggestion</a>
    <li class='indexItem indexItem2'><a href='#DelSuggestionsOlderThan_%26DelSuggestionsOlderThan(%24days)'>DelSuggestionsOlderThan &#38;DelSuggestionsOlderThan($days)</a>
    <li class='indexItem indexItem2'><a href='#MarcRecordFromNewSuggestion'>MarcRecordFromNewSuggestion</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>C4::Suggestions - Some useful functions for dealings with aqorders.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>use C4::Suggestions;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The functions in this module deal with the aqorders in OPAC and in staff interface</p>

<p>A suggestion is done in the OPAC.
It has the status &#34;ASKED&#34;</p>

<p>When a librarian manages the suggestion,
they can set the status to &#34;REJECTED&#34; or &#34;ACCEPTED&#34;.</p>

<p>When the book is ordered,
the suggestion status becomes &#34;ORDERED&#34;</p>

<p>When a book is ordered and arrived in the library,
the status becomes &#34;AVAILABLE&#34;</p>

<p>All aqorders of a borrower can be seen by the borrower itself.
Suggestions done by other borrowers can be seen when not &#34;AVAILABLE&#34;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="FUNCTIONS"
>FUNCTIONS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="GetSuggestion"
>GetSuggestion</a></h2>

<p>\%sth = &#38;GetSuggestion($suggestionid)</p>

<p>this function get the detail of the suggestion $suggestionid (input arg)</p>

<p>return : the result of the SQL query as a hash : $sth-&#62;fetchrow_hashref.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="GetSuggestionFromBiblionumber"
>GetSuggestionFromBiblionumber</a></h2>

<p>$ordernumber = &#38;GetSuggestionFromBiblionumber($biblionumber)</p>

<p>Get a suggestion from it&#39;s biblionumber.</p>

<p>return : the id of the suggestion which is related to the biblionumber given on input args.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="GetSuggestionInfoFromBiblionumber"
>GetSuggestionInfoFromBiblionumber</a></h2>

<p>Get a suggestion and borrower&#39;s informations from it&#39;s biblionumber.</p>

<p>return : all informations (suggestion and borrower) of the suggestion which is related to the biblionumber given.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="GetSuggestionInfo"
>GetSuggestionInfo</a></h2>

<p>Get a suggestion and borrower&#39;s informations from it&#39;s suggestionid</p>

<p>return : all informations (suggestion and borrower) of the suggestion which is related to the suggestionid given.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="GetSuggestionByStatus"
>GetSuggestionByStatus</a></h2>

<p>$aqorders = &#38;GetSuggestionByStatus($status,[$branchcode])</p>

<p>Get a suggestion from it&#39;s status</p>

<p>return : all the suggestion with <code>$status</code></p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="NewSuggestion"
>NewSuggestion</a></h2>

<p>&#38;NewSuggestion($suggestion);</p>

<p>Insert a new suggestion on database with value given on input arg.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ModSuggestion"
>ModSuggestion</a></h2>

<p>&#38;ModSuggestion($suggestion)</p>

<p>Modify the suggestion according to the hash passed by ref.
The hash HAS to contain suggestionid Data not defined is not updated unless it is a note or sort1 Send a mail to notify the user that did the suggestion.</p>

<p>Note that there is no function to modify a suggestion.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ConnectSuggestionAndBiblio"
>ConnectSuggestionAndBiblio</a></h2>

<p>&#38;ConnectSuggestionAndBiblio($ordernumber,$biblionumber)</p>

<p>connect a suggestion to an existing biblio</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="DelSuggestion"
>DelSuggestion</a></h2>

<p>&#38;DelSuggestion($borrowernumber,$ordernumber)</p>

<p>Delete a suggestion.
A borrower can delete a suggestion only if they are its owner.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="DelSuggestionsOlderThan_&#38;DelSuggestionsOlderThan($days)"
>DelSuggestionsOlderThan &#38;DelSuggestionsOlderThan($days)</a></h2>

<pre>    Delete all suggestions older than TODAY-$days , that have be accepted or rejected.
    We do now allow a negative number. If you want to delete all suggestions, just use Koha::Suggestions-&#62;delete or so.</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="MarcRecordFromNewSuggestion"
>MarcRecordFromNewSuggestion</a></h2>

<pre>    $record = MarcRecordFromNewSuggestion ( $suggestion )</pre>

<p>This function build a marc record object from a suggestion</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Koha Development Team &#60;http://koha-community.org/&#62;</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
