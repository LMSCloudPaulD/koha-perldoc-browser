<html><head><title>Koha::Items</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÉ</text></svg>" />

<link rel="stylesheet" href="../sub.css">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.42,
  using Pod::Simple::PullParser v3.42,
  under Perl v5.034000 at Fri Mar 31 12:27:35 2023 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#API'>API</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Class_methods'>Class methods</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#filter_by_for_hold'>filter_by_for_hold</a>
      <li class='indexItem indexItem3'><a href='#filter_by_visible_in_opac'>filter_by_visible_in_opac</a>
      <li class='indexItem indexItem3'><a href='#filter_out_lost'>filter_out_lost</a>
      <li class='indexItem indexItem3'><a href='#move_to_biblio'>move_to_biblio</a>
      <li class='indexItem indexItem3'><a href='#batch_update'>batch_update</a>
      <li class='indexItem indexItem3'><a href='#search_ordered'>search_ordered</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#Internal_methods'>Internal methods</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#_type'>_type</a>
      <li class='indexItem indexItem3'><a href='#object_class'>object_class</a>
    </ul>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Koha::Items - Koha Item object set class</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="API"
>API</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class_methods"
>Class methods</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="filter_by_for_hold"
>filter_by_for_hold</a></h3>

<pre>    my $filtered_items = $items-&#62;filter_by_for_hold;</pre>

<p>Return the items of the set that are *potentially* holdable.</p>

<p>Caller has the responsibility to call C4::Reserves::CanItemBeReserved before placing a hold on one of those items.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="filter_by_visible_in_opac"
>filter_by_visible_in_opac</a></h3>

<pre>    my $filered_items = $items-&#62;filter_by_visible_in_opac(
        {
            [ patron =&#62; $patron ]
        }
    );</pre>

<p>Returns a new resultset, containing those items that are not expected to be hidden in OPAC for the passed <i>Koha::Patron</i> object that is passed.</p>

<p>The <i>OpacHiddenItems</i>, <i>hidelostitems</i> and <i>OpacHiddenItemsExceptions</i> system preferences are honoured.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="filter_out_lost"
>filter_out_lost</a></h3>

<pre>    my $filered_items = $items-&#62;filter_out_lost;</pre>

<p>Returns a new resultset, containing those items that are not marked as lost.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="move_to_biblio"
>move_to_biblio</a></h3>

<pre> $items-&#62;move_to_biblio($to_biblio);</pre>

<p>Move items to a given biblio.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="batch_update"
>batch_update</a></h3>

<pre>    Koha::Items-&#62;search-&#62;batch_update
        {
            new_values =&#62; {
                itemnotes =&#62; $new_item_notes,
                k         =&#62; $k,
            },
            regex_mod =&#62; {
                itemnotes_nonpublic =&#62; {
                    search =&#62; &#39;foo&#39;,
                    replace =&#62; &#39;bar&#39;,
                    modifiers =&#62; &#39;gi&#39;,
                },
            },
            exclude_from_local_holds_priority =&#62; 1|0,
            callback =&#62; sub {
                # increment something here
            },
        }
    );</pre>

<p>Batch update the items.</p>

<p>Returns ( $report, $self ) Report has 2 keys: * modified_itemnumbers - list of the modified itemnumbers * modified_fields - number of fields modified</p>

<p>Parameters:</p>

<dl>
<dt><a name="new_values"
>new_values</a></dt>

<dd>
<p>Allows to set a new value for given fields. The key can be one of the item&#39;s column name, or one subfieldcode of a MARC subfields not linked with a Koha field</p>

<dt><a name="regex_mod"
>regex_mod</a></dt>

<dd>
<p>Allows to modify existing subfield&#39;s values using a regular expression</p>

<dt><a name="exclude_from_local_holds_priority"
>exclude_from_local_holds_priority</a></dt>

<dd>
<p>Set the passed boolean value to items.exclude_from_local_holds_priority</p>

<dt><a name="mark_items_returned"
>mark_items_returned</a></dt>

<dd>
<p>Move issues on these items to the old issues table, do not mark items found, or adjust damaged/withdrawn statuses, or fines, or locations.</p>

<dt><a name="callback"
>callback</a></dt>

<dd>
<p>Callback function to call after an item has been modified</p>
</dd>
</dl>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="search_ordered"
>search_ordered</a></h3>

<pre> $items-&#62;search_ordered;</pre>

<p>Search and sort items in a specific order, depending if serials are present or not</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Internal_methods"
>Internal methods</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="_type"
>_type</a></h3>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="object_class"
>object_class</a></h3>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Kyle M Hall &#60;kyle@bywatersolutions.com&#62; Tomas Cohen Arazi &#60;tomascohen@theke.io&#62; Martin Renvoize &#60;martin.renvoize@ptfs-europe.com&#62;</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
