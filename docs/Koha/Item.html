<html><head><title>Koha::Item</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÉ</text></svg>" />

<link rel="stylesheet" href="../sub.css">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.42,
  using Pod::Simple::PullParser v3.42,
  under Perl v5.034000 at Thu Feb  8 12:11:02 2024 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#API'>API</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Class_methods'>Class methods</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#store'>store</a>
      <li class='indexItem indexItem3'><a href='#delete'>delete</a>
      <li class='indexItem indexItem3'><a href='#safe_delete'>safe_delete</a>
      <li class='indexItem indexItem3'><a href='#safe_to_delete'>safe_to_delete</a>
      <li class='indexItem indexItem3'><a href='#move_to_deleted'>move_to_deleted</a>
      <li class='indexItem indexItem3'><a href='#effective_itemtype'>effective_itemtype</a>
      <li class='indexItem indexItem3'><a href='#home_branch'>home_branch</a>
      <li class='indexItem indexItem3'><a href='#holding_branch'>holding_branch</a>
      <li class='indexItem indexItem3'><a href='#biblio'>biblio</a>
      <li class='indexItem indexItem3'><a href='#biblioitem'>biblioitem</a>
      <li class='indexItem indexItem3'><a href='#checkout'>checkout</a>
      <li class='indexItem indexItem3'><a href='#item_group'>item_group</a>
      <li class='indexItem indexItem3'><a href='#return_claims'>return_claims</a>
      <li class='indexItem indexItem3'><a href='#return_claim'>return_claim</a>
      <li class='indexItem indexItem3'><a href='#holds'>holds</a>
      <li class='indexItem indexItem3'><a href='#bookings'>bookings</a>
      <li class='indexItem indexItem3'><a href='#find_booking'>find_booking</a>
      <li class='indexItem indexItem3'><a href='#check_booking'>check_booking</a>
      <li class='indexItem indexItem3'><a href='#place_booking'>place_booking</a>
      <li class='indexItem indexItem3'><a href='#request_transfer'>request_transfer</a>
      <li class='indexItem indexItem3'><a href='#get_transfer'>get_transfer</a>
      <li class='indexItem indexItem3'><a href='#get_transfers'>get_transfers</a>
      <li class='indexItem indexItem3'><a href='#last_returned_by'>last_returned_by</a>
      <li class='indexItem indexItem3'><a href='#can_article_request'>can_article_request</a>
      <li class='indexItem indexItem3'><a href='#hidden_in_opac'>hidden_in_opac</a>
      <li class='indexItem indexItem3'><a href='#can_be_transferred'>can_be_transferred</a>
      <li class='indexItem indexItem3'><a href='#pickup_locations'>pickup_locations</a>
      <li class='indexItem indexItem3'><a href='#article_request_type'>article_request_type</a>
      <li class='indexItem indexItem3'><a href='#current_holds'>current_holds</a>
      <li class='indexItem indexItem3'><a href='#stockrotationitem'>stockrotationitem</a>
      <li class='indexItem indexItem3'><a href='#add_to_rota'>add_to_rota</a>
      <li class='indexItem indexItem3'><a href='#has_pending_hold'>has_pending_hold</a>
      <li class='indexItem indexItem3'><a href='#has_pending_recall_%7B'>has_pending_recall {</a>
      <li class='indexItem indexItem3'><a href='#as_marc_field'>as_marc_field</a>
      <li class='indexItem indexItem3'><a href='#renewal_branchcode'>renewal_branchcode</a>
      <li class='indexItem indexItem3'><a href='#cover_images'>cover_images</a>
      <li class='indexItem indexItem3'><a href='#columns_to_str'>columns_to_str</a>
      <li class='indexItem indexItem3'><a href='#additional_attributes'>additional_attributes</a>
      <li class='indexItem indexItem3'><a href='#_set_found_trigger'>_set_found_trigger</a>
      <li class='indexItem indexItem3'><a href='#public_read_list'>public_read_list</a>
      <li class='indexItem indexItem3'><a href='#to_api'>to_api</a>
      <li class='indexItem indexItem3'><a href='#to_api_mapping'>to_api_mapping</a>
      <li class='indexItem indexItem3'><a href='#itemtype'>itemtype</a>
      <li class='indexItem indexItem3'><a href='#orders'>orders</a>
      <li class='indexItem indexItem3'><a href='#tracked_links'>tracked_links</a>
      <li class='indexItem indexItem3'><a href='#move_to_biblio'>move_to_biblio</a>
      <li class='indexItem indexItem3'><a href='#bundle_items'>bundle_items</a>
      <li class='indexItem indexItem3'><a href='#is_bundle'>is_bundle</a>
      <li class='indexItem indexItem3'><a href='#bundle_host'>bundle_host</a>
      <li class='indexItem indexItem3'><a href='#in_bundle'>in_bundle</a>
      <li class='indexItem indexItem3'><a href='#add_to_bundle'>add_to_bundle</a>
      <li class='indexItem indexItem3'><a href='#remove_from_bundle'>remove_from_bundle</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#Internal_methods'>Internal methods</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#_after_item_action_hooks'>_after_item_action_hooks</a>
      <li class='indexItem indexItem3'><a href='#recall'>recall</a>
      <li class='indexItem indexItem3'><a href='#can_be_recalled'>can_be_recalled</a>
      <li class='indexItem indexItem3'><a href='#can_be_waiting_recall'>can_be_waiting_recall</a>
      <li class='indexItem indexItem3'><a href='#check_recalls'>check_recalls</a>
      <li class='indexItem indexItem3'><a href='#is_notforloan'>is_notforloan</a>
      <li class='indexItem indexItem3'><a href='#is_denied_renewal'>is_denied_renewal</a>
      <li class='indexItem indexItem3'><a href='#strings_map'>strings_map</a>
      <li class='indexItem indexItem3'><a href='#location_update_trigger'>location_update_trigger</a>
      <li class='indexItem indexItem3'><a href='#_type'>_type</a>
    </ul>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Koha::Item - Koha Item object class</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="API"
>API</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class_methods"
>Class methods</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="store"
>store</a></h3>

<pre>    $item-&#62;store;</pre>

<p>$params can take an optional &#39;skip_record_index&#39; parameter. If set, the reindexation process will not happen (index_records not called) You should not turn it on if you do not understand what it is doing exactly.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="delete"
>delete</a></h3>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="safe_delete"
>safe_delete</a></h3>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="safe_to_delete"
>safe_to_delete</a></h3>

<p>returns 1 if the item is safe to delete,</p>

<p>&#34;book_on_loan&#34; if the item is checked out,</p>

<p>&#34;not_same_branch&#34; if the item is blocked by independent branches,</p>

<p>&#34;book_reserved&#34; if the there are holds aganst the item, or</p>

<p>&#34;linked_analytics&#34; if the item has linked analytic records.</p>

<p>&#34;last_item_for_hold&#34; if the item is the last one on a record on which a biblio-level hold is placed</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="move_to_deleted"
>move_to_deleted</a></h3>

<p>my $is_moved = $item-&#62;move_to_deleted;</p>

<p>Move an item to the deleteditems table. This can be done before deleting an item, to make sure the data are not completely deleted.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="effective_itemtype"
>effective_itemtype</a></h3>

<p>Returns the itemtype for the item based on whether item level itemtypes are set or not.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="home_branch"
>home_branch</a></h3>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="holding_branch"
>holding_branch</a></h3>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="biblio"
>biblio</a></h3>

<p>my $biblio = $item-&#62;biblio;</p>

<p>Return the bibliographic record of this item</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="biblioitem"
>biblioitem</a></h3>

<p>my $biblioitem = $item-&#62;biblioitem;</p>

<p>Return the biblioitem record of this item</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="checkout"
>checkout</a></h3>

<p>my $checkout = $item-&#62;checkout;</p>

<p>Return the checkout for this item</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="item_group"
>item_group</a></h3>

<p>my $item_group = $item-&#62;item_group;</p>

<p>Return the item group for this item</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="return_claims"
>return_claims</a></h3>

<pre>  my $return_claims = $item-&#62;return_claims;</pre>

<p>Return any return_claims associated with this item</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="return_claim"
>return_claim</a></h3>

<pre>  my $return_claim = $item-&#62;return_claim;</pre>

<p>Returns the most recent unresolved return_claims associated with this item</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="holds"
>holds</a></h3>

<p>my $holds = $item-&#62;holds(); my $holds = $item-&#62;holds($params); my $holds = $item-&#62;holds({ found =&#62; &#39;W&#39;});</p>

<p>Return holds attached to an item, optionally accept a hashref of params to pass to search</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="bookings"
>bookings</a></h3>

<pre>    my $bookings = $item-&#62;bookings();</pre>

<p>Returns the bookings attached to this item.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="find_booking"
>find_booking</a></h3>

<p>Find the first booking that would conflict with the passed checkout dates</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="check_booking"
>check_booking</a></h3>

<pre>    my $bookable =
        $item-&#62;check_booking( { start_date =&#62; $datetime, end_date =&#62; $datetime, [ booking_id =&#62; $booking_id ] } );</pre>

<p>Returns a boolean denoting whether the passed booking can be made without clashing.</p>

<p>Optionally, you may pass a booking id to exclude from the checks; This is helpful when you are updating an existing booking.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="place_booking"
>place_booking</a></h3>

<pre>  my $booking = $item-&#62;place_booking(
    {
        patron     =&#62; $patron,
        start_date =&#62; $datetime,
        end_date   =&#62; $datetime
    }
  );</pre>

<p>Add a booking for this item for the dates passed.</p>

<p>Returns the Koha::Booking object or throws an exception if the item cannot be booked for the given dates.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="request_transfer"
>request_transfer</a></h3>

<pre>  my $transfer = $item-&#62;request_transfer(
    {
        to     =&#62; $to_library,
        reason =&#62; $reason,
        [ ignore_limits =&#62; 0, enqueue =&#62; 1, replace =&#62; 1 ]
    }
  );</pre>

<p>Add a transfer request for this item to the given branch for the given reason.</p>

<p>An exception will be thrown if the BranchTransferLimits would prevent the requested transfer, unless &#39;ignore_limits&#39; is passed to override the limits.</p>

<p>An exception will be thrown if an active transfer (i.e pending arrival date) is found; The caller should catch such cases and retry the transfer request as appropriate passing an appropriate override.</p>

<p>Overrides * enqueue - Used to queue up the transfer when the existing transfer is found to be in transit. * replace - Used to replace the existing transfer request with your own.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="get_transfer"
>get_transfer</a></h3>

<pre>  my $transfer = $item-&#62;get_transfer;</pre>

<p>Return the active transfer request or undef</p>

<p>Note: Transfers are retrieved in a Modified FIFO (First In First Out) order whereby the most recently sent, but not received, transfer will be returned if it exists, otherwise the oldest unsatisfied transfer will be returned.</p>

<p>This allows for transfers to queue, which is the case for stock rotation and rotating collections where a manual transfer may need to take precedence but we still expect the item to end up at a final location eventually.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="get_transfers"
>get_transfers</a></h3>

<pre>  my $transfer = $item-&#62;get_transfers;</pre>

<p>Return the list of outstanding transfers (i.e requested but not yet cancelled or received).</p>

<p>Note: Transfers are retrieved in a Modified FIFO (First In First Out) order whereby the most recently sent, but not received, transfer will be returned first if it exists, otherwise requests are in oldest to newest request order.</p>

<p>This allows for transfers to queue, which is the case for stock rotation and rotating collections where a manual transfer may need to take precedence but we still expect the item to end up at a final location eventually.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="last_returned_by"
>last_returned_by</a></h3>

<p>Gets and sets the last patron to return an item.</p>

<p>Accepts a patron&#39;s id (borrowernumber) and returns Koha::Patron objects</p>

<p>$item-&#62;last_returned_by( $borrowernumber );</p>

<p>my $patron = $item-&#62;last_returned_by();</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="can_article_request"
>can_article_request</a></h3>

<p>my $bool = $item-&#62;can_article_request( $borrower )</p>

<p>Returns true if item can be specifically requested</p>

<p>$borrower must be a Koha::Patron object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="hidden_in_opac"
>hidden_in_opac</a></h3>

<p>my $bool = $item-&#62;hidden_in_opac({ [ rules =&#62; $rules ] })</p>

<p>Returns true if item fields match the hidding criteria defined in $rules. Returns false otherwise.</p>

<p>Takes HASHref that can have the following parameters: OPTIONAL PARAMETERS: $rules : { &#60;field&#62; =&#62; [ value_1, ... ], ... }</p>

<p>Note: $rules inherits its structure from the parsed YAML from reading the <i>OpacHiddenItems</i> system preference.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="can_be_transferred"
>can_be_transferred</a></h3>

<p>$item-&#62;can_be_transferred({ to =&#62; $to_library, from =&#62; $from_library }) Checks if an item can be transferred to given library.</p>

<p>This feature is controlled by two system preferences: UseBranchTransferLimits to enable / disable the feature BranchTransferLimitsType to use either an itemnumber or ccode as an identifier for setting the limitations</p>

<p>Takes HASHref that can have the following parameters: MANDATORY PARAMETERS: $to : Koha::Library OPTIONAL PARAMETERS: $from : Koha::Library # if not given, item holdingbranch # will be used instead</p>

<p>Returns 1 if item can be transferred to $to_library, otherwise 0.</p>

<p>To find out whether at least one item of a Koha::Biblio can be transferred, please see Koha::Biblio-&#62;can_be_transferred() instead of using this method for multiple items of the same biblio.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="pickup_locations"
>pickup_locations</a></h3>

<pre>    my $pickup_locations = $item-&#62;pickup_locations({ patron =&#62; $patron })</pre>

<p>Returns possible pickup locations for this item, according to patron&#39;s home library and if item can be transferred to each pickup location.</p>

<p>Throws a <i>Koha::Exceptions::MissingParameter</i> exception if the <b>mandatory</b> parameter <i>patron</i> is not passed.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="article_request_type"
>article_request_type</a></h3>

<p>my $type = $item-&#62;article_request_type( $borrower )</p>

<p>returns &#39;yes&#39;, &#39;no&#39;, &#39;bib_only&#39;, or &#39;item_only&#39;</p>

<p>$borrower must be a Koha::Patron object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="current_holds"
>current_holds</a></h3>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="stockrotationitem"
>stockrotationitem</a></h3>

<pre>  my $sritem = Koha::Item-&#62;stockrotationitem;</pre>

<p>Returns the stock rotation item associated with the current item.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="add_to_rota"
>add_to_rota</a></h3>

<pre>  my $item = $item-&#62;add_to_rota($rota_id);</pre>

<p>Add this item to the rota identified by $ROTA_ID, which means associating it with the first stage of that rota. Should this item already be associated with a rota, then we will move it to the new rota.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="has_pending_hold"
>has_pending_hold</a></h3>

<pre>  my $is_pending_hold = $item-&#62;has_pending_hold();</pre>

<p>This method checks the tmp_holdsqueue to see if this item has been selected for a hold, but not filled yet and returns true or false</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="has_pending_recall_{"
>has_pending_recall {</a></h3>

<pre>  my $has_pending_recall</pre>

<p>Return if whether has pending recall of not.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="as_marc_field"
>as_marc_field</a></h3>

<pre>    my $field = $item-&#62;as_marc_field;</pre>

<p>This method returns a MARC::Field object representing the Koha::Item object with the current mappings configuration.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="renewal_branchcode"
>renewal_branchcode</a></h3>

<p>Returns the branchcode to be recorded in statistics renewal of the item</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="cover_images"
>cover_images</a></h3>

<p>Return the cover images associated with this item.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="columns_to_str"
>columns_to_str</a></h3>

<pre>    my $values = $items-&#62;columns_to_str;</pre>

<p>Return a hashref with the string representation of the different attribute of the item.</p>

<p>This is meant to be used for display purpose only.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="additional_attributes"
>additional_attributes</a></h3>

<pre>    my $attributes = $item-&#62;additional_attributes;
    $attributes-&#62;{k} = &#39;new k&#39;;
    $item-&#62;update({ more_subfields =&#62; $attributes-&#62;to_marcxml });</pre>

<p>Returns a Koha::Item::Attributes object that represents the non-mapped attributes for this item.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="_set_found_trigger"
>_set_found_trigger</a></h3>

<pre>    $self-&#62;_set_found_trigger</pre>

<p>Finds the most recent lost item charge for this item and refunds the patron appropriately, taking into account any payments or writeoffs already applied against the charge.</p>

<p>Internal function, not exported, called only by Koha::Item-&#62;store.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="public_read_list"
>public_read_list</a></h3>

<p>This method returns the list of publicly readable database fields for both API and UI output purposes</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="to_api"
>to_api</a></h3>

<p>Overloaded to_api method to ensure item-level itypes is adhered to.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="to_api_mapping"
>to_api_mapping</a></h3>

<p>This method returns the mapping for representing a Koha::Item object on the API.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="itemtype"
>itemtype</a></h3>

<pre>    my $itemtype = $item-&#62;itemtype;

    Returns Koha object for effective itemtype</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="orders"
>orders</a></h3>

<pre>  my $orders = $item-&#62;orders();</pre>

<p>Returns a Koha::Acquisition::Orders object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="tracked_links"
>tracked_links</a></h3>

<pre>  my $tracked_links = $item-&#62;tracked_links();</pre>

<p>Returns a Koha::TrackedLinks object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="move_to_biblio"
>move_to_biblio</a></h3>

<pre>  $item-&#62;move_to_biblio($to_biblio[, $params]);</pre>

<p>Move the item to another biblio and update any references in other tables.</p>

<p>The final optional parameter, <code>$params</code>, is expected to contain the &#39;skip_record_index&#39; key, which is relayed down to Koha::Item-&#62;store. There it prevents calling index_records, which takes most of the time in batch adds/deletes. The caller must take care of calling index_records separately.</p>

<p>$params: skip_record_index =&#62; 1|0</p>

<p>Returns undef if the move failed or the biblionumber of the destination record otherwise</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="bundle_items"
>bundle_items</a></h3>

<pre>  my $bundle_items = $item-&#62;bundle_items;</pre>

<p>Returns the items associated with this bundle</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="is_bundle"
>is_bundle</a></h3>

<pre>  my $is_bundle = $item-&#62;is_bundle;</pre>

<p>Returns whether the item is a bundle or not</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="bundle_host"
>bundle_host</a></h3>

<pre>  my $bundle = $item-&#62;bundle_host;</pre>

<p>Returns the bundle item this item is attached to</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="in_bundle"
>in_bundle</a></h3>

<pre>  my $in_bundle = $item-&#62;in_bundle;</pre>

<p>Returns whether this item is currently in a bundle</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="add_to_bundle"
>add_to_bundle</a></h3>

<pre>  my $link = $item-&#62;add_to_bundle($bundle_item);</pre>

<p>Adds the bundle_item passed to this item</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="remove_from_bundle"
>remove_from_bundle</a></h3>

<p>Remove this item from any bundle it may have been attached to.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Internal_methods"
>Internal methods</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="_after_item_action_hooks"
>_after_item_action_hooks</a></h3>

<p>Helper method that takes care of calling all plugin hooks</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="recall"
>recall</a></h3>

<pre>    my $recall = $item-&#62;recall;</pre>

<p>Return the relevant recall for this item</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="can_be_recalled"
>can_be_recalled</a></h3>

<pre>    if ( $item-&#62;can_be_recalled({ patron =&#62; $patron_object }) ) # do recall</pre>

<p>Does item-level checks and returns if items can be recalled by this borrower</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="can_be_waiting_recall"
>can_be_waiting_recall</a></h3>

<pre>    if ( $item-&#62;can_be_waiting_recall ) { # allocate item as waiting for recall</pre>

<p>Checks item type and branch of circ rules to return whether this item can be used to fill a recall. At this point the item has already been recalled. We are now at the checkin and set waiting stage.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="check_recalls"
>check_recalls</a></h3>

<pre>    my $recall = $item-&#62;check_recalls;</pre>

<p>Get the most relevant recall for this item.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="is_notforloan"
>is_notforloan</a></h3>

<pre>    my $is_notforloan = $item-&#62;is_notforloan;</pre>

<p>Determine whether or not this item is &#34;notforloan&#34; based on the item&#39;s notforloan status or its item type</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="is_denied_renewal"
>is_denied_renewal</a></h3>

<pre>    my $is_denied_renewal = $item-&#62;is_denied_renewal;</pre>

<p>Determine whether or not this item can be renewed based on the rules set in the ItemsDeniedRenewal system preference.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="strings_map"
>strings_map</a></h3>

<p>Returns a map of column name to string representations including the string, the mapping type and the mapping category where appropriate.</p>

<p>Currently handles authorised value mappings, library, callnumber and itemtype expansions.</p>

<p>Accepts a param hashref where the &#39;public&#39; key denotes whether we want the public or staff client strings.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="location_update_trigger"
>location_update_trigger</a></h3>

<pre>    $item-&#62;location_update_trigger( $action );</pre>

<p>Updates the item location based on <i>$action</i>. It is done like this:</p>

<dl>
<dt><a name="For_checkin,_location_is_updated_following_the_UpdateItemLocationOnCheckin_preference."
>For <b>checkin</b>, location is updated following the <i>UpdateItemLocationOnCheckin</i> preference.</a></dt>

<dd>
<dt><a name="For_checkout,_location_is_updated_following_the_UpdateItemLocationOnCheckout_preference."
>For <b>checkout</b>, location is updated following the <i>UpdateItemLocationOnCheckout</i> preference.</a></dt>
</dl>

<p>FIXME: It should return <i>$self</i>. See bug 35270.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="_type"
>_type</a></h3>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Kyle M Hall &#60;kyle@bywatersolutions.com&#62;</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
