<html><head><title>C4::Record</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÉ</text></svg>" />

<link rel="stylesheet" href="../sub.css">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.42,
  using Pod::Simple::PullParser v3.42,
  under Perl v5.034000 at Fri Feb  3 12:28:16 2023 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#API_(EXPORTED_FUNCTIONS)'>API (EXPORTED FUNCTIONS)</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#marc2marc_-_Convert_from_one_flavour_of_ISO-2709_to_another'>marc2marc - Convert from one flavour of ISO-2709 to another</a>
    <li class='indexItem indexItem2'><a href='#marc2marcxml_-_Convert_from_ISO-2709_to_MARCXML'>marc2marcxml - Convert from ISO-2709 to MARCXML</a>
    <li class='indexItem indexItem2'><a href='#marcxml2marc_-_Convert_from_MARCXML_to_ISO-2709'>marcxml2marc - Convert from MARCXML to ISO-2709</a>
    <li class='indexItem indexItem2'><a href='#marc2dcxml_-_Convert_from_ISO-2709_to_Dublin_Core'>marc2dcxml - Convert from ISO-2709 to Dublin Core</a>
    <li class='indexItem indexItem2'><a href='#marc2modsxml_-_Convert_from_ISO-2709_to_MODS'>marc2modsxml - Convert from ISO-2709 to MODS</a>
    <li class='indexItem indexItem2'><a href='#marc2madsxml_-_Convert_from_ISO-2709_to_MADS'>marc2madsxml - Convert from ISO-2709 to MADS</a>
    <li class='indexItem indexItem2'><a href='#_transformWithStylesheet_-_Transform_a_MARC_record_with_a_stylesheet'>_transformWithStylesheet - Transform a MARC record with a stylesheet</a>
    <li class='indexItem indexItem2'><a href='#marc2csv_-_Convert_several_records_from_UNIMARC_to_CSV'>marc2csv - Convert several records from UNIMARC to CSV</a>
    <li class='indexItem indexItem2'><a href='#marcrecord2csv_-_Convert_a_single_record_from_UNIMARC_to_CSV'>marcrecord2csv - Convert a single record from UNIMARC to CSV</a>
    <li class='indexItem indexItem2'><a href='#changeEncoding_-_Change_the_encoding_of_a_record'>changeEncoding - Change the encoding of a record</a>
    <li class='indexItem indexItem2'><a href='#marc2bibtex_-_Convert_from_MARC21_and_UNIMARC_to_BibTex'>marc2bibtex - Convert from MARC21 and UNIMARC to BibTex</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#INTERNAL_FUNCTIONS'>INTERNAL FUNCTIONS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#_entity_encode_-_Entity-encode_an_array_of_strings'>_entity_encode - Entity-encode an array of strings</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#MODIFICATIONS'>MODIFICATIONS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>C4::Record - MARC,
MARCXML,
DC,
MODS,
XML,
etc.
Record Management Functions and API</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>New in Koha 3.x.
This module handles all record-related management functions.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="API_(EXPORTED_FUNCTIONS)"
>API (EXPORTED FUNCTIONS)</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="marc2marc_-_Convert_from_one_flavour_of_ISO-2709_to_another"
>marc2marc - Convert from one flavour of ISO-2709 to another</a></h2>

<pre>  my ($error,$newmarc) = marc2marc($marc,$to_flavour,$from_flavour,$encoding);</pre>

<p>Returns an ISO-2709 scalar</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="marc2marcxml_-_Convert_from_ISO-2709_to_MARCXML"
>marc2marcxml - Convert from ISO-2709 to MARCXML</a></h2>

<pre>  my ($error,$marcxml) = marc2marcxml($marc,$encoding,$flavour);</pre>

<p>Returns a MARCXML scalar</p>

<p><code>$marc</code> - an ISO-2709 scalar or MARC::Record object</p>

<p><code>$encoding</code> - UTF-8 or MARC-8 [UTF-8]</p>

<p><code>$flavour</code> - MARC21 or UNIMARC</p>

<p><code>$dont_entity_encode</code> - a flag that instructs marc2marcxml not to entity encode the xml before returning (optional)</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="marcxml2marc_-_Convert_from_MARCXML_to_ISO-2709"
>marcxml2marc - Convert from MARCXML to ISO-2709</a></h2>

<pre>  my ($error,$marc) = marcxml2marc($marcxml,$encoding,$flavour);</pre>

<p>Returns an ISO-2709 scalar</p>

<p><code>$marcxml</code> - a MARCXML record</p>

<p><code>$encoding</code> - UTF-8 or MARC-8 [UTF-8]</p>

<p><code>$flavour</code> - MARC21 or UNIMARC</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="marc2dcxml_-_Convert_from_ISO-2709_to_Dublin_Core"
>marc2dcxml - Convert from ISO-2709 to Dublin Core</a></h2>

<pre>    my dcxml = marc2dcxml ($marc, $xml, $biblionumber, $format);</pre>

<p>EXAMPLE</p>

<pre>    my dcxml = marc2dcxml (undef, undef, 1, &#34;oaidc&#34;);</pre>

<p>Convert MARC or MARCXML to Dublin Core metadata (XSLT Transformation), optionally can get an XML directly from biblio_metadata without item information. This method take into consideration the syspref &#39;marcflavour&#39; (UNIMARC or MARC21). Return an XML file with the format defined in <code>$format</code></p>

<p><code>$marc</code> - an ISO-2709 scalar or MARC::Record object</p>

<p><code>$xml</code> - a MARCXML file</p>

<p><code>$biblionumber</code> - biblionumber for database access</p>

<p><code>$format</code> - accept three type of DC formats (oaidc, srwdc, and rdfdc )</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="marc2modsxml_-_Convert_from_ISO-2709_to_MODS"
>marc2modsxml - Convert from ISO-2709 to MODS</a></h2>

<pre>  my $modsxml = marc2modsxml($marc);</pre>

<p>Returns a MODS scalar</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="marc2madsxml_-_Convert_from_ISO-2709_to_MADS"
>marc2madsxml - Convert from ISO-2709 to MADS</a></h2>

<pre>  my $madsxml = marc2madsxml($marc);</pre>

<p>Returns a MADS scalar</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="_transformWithStylesheet_-_Transform_a_MARC_record_with_a_stylesheet"
>_transformWithStylesheet - Transform a MARC record with a stylesheet</a></h2>

<pre>    my $xml = _transformWithStylesheet($marc, $stylesheet)</pre>

<p>Returns the XML scalar result of the transformation. $stylesheet should contain the path to a stylesheet under intrahtdocs.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="marc2csv_-_Convert_several_records_from_UNIMARC_to_CSV"
>marc2csv - Convert several records from UNIMARC to CSV</a></h2>

<pre>  my ($csv) = marc2csv($biblios, $csvprofileid, $itemnumbers);</pre>

<p>Pre and postprocessing can be done through a YAML file</p>

<p>Returns a CSV scalar</p>

<p><code>$biblio</code> - a list of biblionumbers</p>

<p><code>$csvprofileid</code> - the id of the CSV profile to use for the export (see export_format.export_format_id)</p>

<p><code>$itemnumbers</code> - a list of itemnumbers to export</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="marcrecord2csv_-_Convert_a_single_record_from_UNIMARC_to_CSV"
>marcrecord2csv - Convert a single record from UNIMARC to CSV</a></h2>

<pre>  my ($csv) = marcrecord2csv($biblio, $csvprofileid, $header);</pre>

<p>Returns a CSV scalar</p>

<p><code>$biblio</code> - a biblionumber</p>

<p><code>$csvprofileid</code> - the id of the CSV profile to use for the export (see export_format.export_format_id)</p>

<p><code>$header</code> - true if the headers are to be printed (typically at first pass)</p>

<p><code>$csv</code> - an already initialised Text::CSV object</p>

<p><code>$fieldprocessing</code></p>

<p><code>$itemnumbers</code> a list of itemnumbers to export</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="changeEncoding_-_Change_the_encoding_of_a_record"
>changeEncoding - Change the encoding of a record</a></h2>

<pre>  my ($error, $newrecord) = changeEncoding($record,$format,$flavour,$to_encoding,$from_encoding);</pre>

<p>Changes the encoding of a record</p>

<p><code>$record</code> - the record itself can be in ISO-2709, a MARC::Record object, or MARCXML for now (required)</p>

<p><code>$format</code> - MARC or MARCXML (required)</p>

<p><code>$flavour</code> - MARC21 or UNIMARC, if MARC21, it will change the leader (optional) [defaults to Koha system preference]</p>

<p><code>$to_encoding</code> - the encoding you want the record to end up in (optional) [UTF-8]</p>

<p><code>$from_encoding</code> - the encoding the record is currently in (optional, it will probably be able to tell unless there&#39;s a problem with the record)</p>

<p>FIXME: the from_encoding doesn&#39;t work yet</p>

<p>FIXME: better handling for UNIMARC, it should allow management of 100 field</p>

<p>FIXME: shouldn&#39;t have to convert to and from xml/marc just to change encoding someone needs to re-write MARC::Record&#39;s &#39;encoding&#39; method to actually alter the encoding rather than just changing the leader</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="marc2bibtex_-_Convert_from_MARC21_and_UNIMARC_to_BibTex"
>marc2bibtex - Convert from MARC21 and UNIMARC to BibTex</a></h2>

<pre>  my ($bibtex) = marc2bibtex($record, $id);</pre>

<p>Returns a BibTex scalar</p>

<p><code>$record</code> - a MARC::Record object</p>

<p><code>$id</code> - an id for the BibTex record (might be the biblionumber)</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="INTERNAL_FUNCTIONS"
>INTERNAL FUNCTIONS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="_entity_encode_-_Entity-encode_an_array_of_strings"
>_entity_encode - Entity-encode an array of strings</a></h2>

<pre>  my ($entity_encoded_string) = _entity_encode($string);</pre>

<p>or</p>

<pre>  my (@entity_encoded_strings) = _entity_encode(@strings);</pre>

<p>Entity-encode an array of strings</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Joshua Ferraro &#60;jmf@liblime.com&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="MODIFICATIONS"
>MODIFICATIONS</a></h1>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
