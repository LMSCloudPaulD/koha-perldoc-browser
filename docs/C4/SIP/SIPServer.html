<html><head><title>C4::SIP::SIPServer</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÉ</text></svg>" />

<link rel="stylesheet" href="../../sub.css">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.43,
  using Pod::Simple::PullParser v3.43,
  under Perl v5.038002 at Fri Jan 24 12:07:45 2025 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <ul   class='indexList indexList2'>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#options'>options</a>
      <li class='indexItem indexItem3'><a href='#post_configure_hook'>post_configure_hook</a>
      <li class='indexItem indexItem3'><a href='#post_accept_hook'>post_accept_hook</a>
    </ul>
  </ul>
</ul>
</div>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="options"
>options</a></h3>

<p>As per Net::Server documentation,
override &#34;options&#34; to provide your own custom options to the Net::Server* object.
This allows us to use the Net::Server infrastructure for configuration rather than hacking our own configuration into the object.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="post_configure_hook"
>post_configure_hook</a></h3>

<p>As per Net::Server documentation,
this method validates our custom configuration.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="post_accept_hook"
>post_accept_hook</a></h3>

<p>This hook occurs after the client connection socket is created,
which gives us an opportunity to enable support for TCP keepalives using the SO_KEEPALIVE socket option.</p>

<p>By default,
the kernel-level defaults (in seconds) are used.
You can view these in the output of &#34;sysctl -a&#34;: net.ipv4.tcp_keepalive_intvl = 75 net.ipv4.tcp_keepalive_time = 7200</p>

<p>Alternatively,
you can use &#34;custom_tcp_keepalive_time&#34; and &#34;custom_tcp_keepalive_intvl&#34; to define your own custom values for the socket.
Note that these parameters are defined at the top server-level and not on the listener-level.</p>

<p>If you lower &#34;custom_tcp_keepalive_time&#34; below 75,
you will also need to set &#34;custom_tcp_keepalive_intvl&#34;.
The &#34;tcp_keepalive_time&#34; is the initial time used for the keepalive timer,
and the &#34;tcp_keepalive_intvl&#34; is the time used for subsequent keepalive timers.
However,
timers only send keepalive ACKs if the idle time elapsed is greater than &#34;tcp_keepalive_time&#34;.</p>

<p>Thus,
if &#34;tcp_keepalive_time = 10&#34; and &#34;tcp_keepalive_intvl = 5&#34;,
a keepalive ACK will be sent every 10 seconds of idle time.
If &#34;tcp_keepalive_intvl = 10&#34; and &#34;tcp_keepalive_time = 5&#34;,
a keepalive ACK will be sent after 5 seconds of idle time,
and the next keepalive ACK will be sent after 10 seconds of idle time.
Generally speaking,
it&#39;s best to set &#34;tcp_keepalive_time&#34; to be higher than &#34;tcp_keepalive_intvl&#34;.</p>

<p>Reminder: once these settings are set on the socket,
they are handled by the operating system kernel,
and not by the SIP server application.
If you are having trouble with your settings,
monitor your TCP traffic using a tool such as &#34;tcpdump&#34; to review and refine how they work.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
