<html><head><title>t::lib::Selenium</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÉ</text></svg>" />

<link rel="stylesheet" href="../../sub.css">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.42,
  using Pod::Simple::PullParser v3.42,
  under Perl v5.034000 at Sun Mar 12 18:17:58 2023 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new'>new</a>
    <li class='indexItem indexItem2'><a href='#auth'>auth</a>
    <li class='indexItem indexItem2'><a href='#fill_form'>fill_form</a>
    <li class='indexItem indexItem2'><a href='#submit_form'>submit_form</a>
    <li class='indexItem indexItem2'><a href='#click'>click</a>
    <li class='indexItem indexItem2'><a href='#click_when_visible'>click_when_visible</a>
    <li class='indexItem indexItem2'><a href='#capture_%24c-%3Ecapture'>capture $c-&#62;capture</a>
    <li class='indexItem indexItem2'><a href='#add_error_handler_%24c-%3Eadd_error_handler'>add_error_handler $c-&#62;add_error_handler</a>
    <li class='indexItem indexItem2'><a href='#remove_error_handler_%24c-%3Eremove_error_handler'>remove_error_handler $c-&#62;remove_error_handler</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHORS'>AUTHORS</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
  <li class='indexItem indexItem1'><a href='#LICENSE'>LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>t::lib::Selenium - Selenium helper module</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    my $s = t::lib::Selenium-&#62;new;
    my $driver = $s-&#62;driver;
    my $base_url = $s-&#62;base_url;
    $s-&#62;auth;
    $driver-&#62;get($s-&#62;base_url . &#39;mainpage.pl&#39;);
    $s-&#62;fill_form({ input_id =&#62; &#39;value&#39; });</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The goal of this module is to group the different actions we need when we use automation test using Selenium</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new"
>new</a></h2>

<pre>    my $s = t::lib::Selenium-&#62;new;

    Constructor - Returns the object Selenium
    You can pass login, password, base_url, selenium_addr, selenium_port
    If not passed, the environment variables will be used
    KOHA_USER, KOHA_PASS, KOHA_INTRANET_URL, SELENIUM_ADDR SELENIUM_PORT
    Or koha, koha, syspref staffClientBaseURL, localhost, 4444</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="auth"
>auth</a></h2>

<pre>    $s-&#62;auth;

    Will login into Koha.</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="fill_form"
>fill_form</a></h2>

<pre>    $driver-&#62;get($url)
    $s-&#62;fill_form({
        input_id =&#62; &#39;value&#39;,
        element_id =&#62; &#39;other_value&#39;,
    });

    Will fill the different elements of a form.
    The keys must be element ids (input and select are supported so far)
    The values must a string.</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="submit_form"
>submit_form</a></h2>

<pre>    $s-&#62;submit_form;

    It will submit the form using the submit button present in in the fieldset with a clas=&#34;action&#34;.
    It should be the default way. If it does not work you should certainly fix the Koha interface.</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="click"
>click</a></h2>

<pre>    $s-&#62;click

    This is a bit dirty for now but will evolve depending on the needs
    3 parameters possible but only the following 2 forms are used:
    $s-&#62;click({ href =&#62; &#39;/module/script.pl?foo=bar&#39;, main =&#62; &#39;doc3&#39; }); # Sometimes we have doc or doc3. To make sure we are not going to hit a link in the header
    $s-&#62;click({ id =&#62; &#39;element_id });</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="click_when_visible"
>click_when_visible</a></h2>

<pre>    $c-&#62;click_when_visible

    Should always be called to avoid the &#34;An element could not be located on the page&#34; error</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="capture_$c-&#62;capture"
>capture $c-&#62;capture</a></h2>

<p>Capture a screenshot and upload it using the excellent lut.im service provided by framasoft The url of the image will be printed on STDERR (it should be better to return it instead)</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="add_error_handler_$c-&#62;add_error_handler"
>add_error_handler $c-&#62;add_error_handler</a></h2>

<p>Add our specific error handler to the driver. It will displayed a trace as well as capture a screenshot of the current screen. So only case you should need it is after you called remove_error_handler</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="remove_error_handler_$c-&#62;remove_error_handler"
>remove_error_handler $c-&#62;remove_error_handler</a></h2>

<p>Do *not* call this method if you are not aware of what it will do! It will remove any kinds of error raised by the driver. It can be useful in some cases, for instance if you want to make sure something will not happen and that could make the driver exploses otherwise. You certainly should call it for only one statement then must call add_error_handler right after.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHORS"
>AUTHORS</a></h1>

<p>Jonathan Druart &#60;jonathan.druart@bugs.koha-community.org&#62;</p>

<p>Alex Buckley &#60;alexbuckley@catalyst.net.nz&#62;</p>

<p>Koha Development Team</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright 2017 - Koha Development Team</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LICENSE"
>LICENSE</a></h1>

<p>This file is part of Koha.</p>

<p>Koha is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version.</p>

<p>Koha is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>

<p>You should have received a copy of the GNU General Public License along with Koha; if not, see &#60;http://www.gnu.org/licenses&#62;.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
