<html><head><title>Koha::Biblio</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÉ</text></svg>" />

<link rel="stylesheet" href="../sub.css">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.42,
  using Pod::Simple::PullParser v3.42,
  under Perl v5.034000 at Sun Sep 15 06:06:10 2024 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#API'>API</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Class_Methods'>Class Methods</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#store'>store</a>
      <li class='indexItem indexItem3'><a href='#metadata'>metadata</a>
      <li class='indexItem indexItem3'><a href='#record'>record</a>
      <li class='indexItem indexItem3'><a href='#record_schema'>record_schema</a>
      <li class='indexItem indexItem3'><a href='#orders'>orders</a>
      <li class='indexItem indexItem3'><a href='#uncancelled_orders'>uncancelled_orders</a>
      <li class='indexItem indexItem3'><a href='#acq_status'>acq_status</a>
      <li class='indexItem indexItem3'><a href='#tickets'>tickets</a>
      <li class='indexItem indexItem3'><a href='#ill_requests'>ill_requests</a>
      <li class='indexItem indexItem3'><a href='#item_groups'>item_groups</a>
      <li class='indexItem indexItem3'><a href='#can_article_request'>can_article_request</a>
      <li class='indexItem indexItem3'><a href='#can_be_edited'>can_be_edited</a>
      <li class='indexItem indexItem3'><a href='#check_booking'>check_booking</a>
      <li class='indexItem indexItem3'><a href='#can_be_transferred'>can_be_transferred</a>
      <li class='indexItem indexItem3'><a href='#pickup_locations'>pickup_locations</a>
      <li class='indexItem indexItem3'><a href='#hidden_in_opac'>hidden_in_opac</a>
      <li class='indexItem indexItem3'><a href='#article_request_type'>article_request_type</a>
      <li class='indexItem indexItem3'><a href='#article_request_type_for_bib'>article_request_type_for_bib</a>
      <li class='indexItem indexItem3'><a href='#article_request_type_for_items'>article_request_type_for_items</a>
      <li class='indexItem indexItem3'><a href='#article_requests'>article_requests</a>
      <li class='indexItem indexItem3'><a href='#current_checkouts'>current_checkouts</a>
      <li class='indexItem indexItem3'><a href='#old_checkouts'>old_checkouts</a>
      <li class='indexItem indexItem3'><a href='#items'>items</a>
      <li class='indexItem indexItem3'><a href='#bookable_items'>bookable_items</a>
      <li class='indexItem indexItem3'><a href='#host_items'>host_items</a>
      <li class='indexItem indexItem3'><a href='#_host_itemnumbers'>_host_itemnumbers</a>
      <li class='indexItem indexItem3'><a href='#itemtype'>itemtype</a>
      <li class='indexItem indexItem3'><a href='#holds'>holds</a>
      <li class='indexItem indexItem3'><a href='#current_holds'>current_holds</a>
      <li class='indexItem indexItem3'><a href='#biblioitem'>biblioitem</a>
      <li class='indexItem indexItem3'><a href='#bookings'>bookings</a>
      <li class='indexItem indexItem3'><a href='#suggestions'>suggestions</a>
      <li class='indexItem indexItem3'><a href='#get_marc_components'>get_marc_components</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#get_components_query'>get_components_query</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#get_marc_volumes'>get_marc_volumes</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#get_volumes_query'>get_volumes_query</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#subscriptions'>subscriptions</a>
      <li class='indexItem indexItem3'><a href='#serials'>serials</a>
      <li class='indexItem indexItem3'><a href='#subscription_histories'>subscription_histories</a>
      <li class='indexItem indexItem3'><a href='#has_items_waiting_or_intransit'>has_items_waiting_or_intransit</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#get_coins'>get_coins</a>
    <li class='indexItem indexItem2'><a href='#get_openurl'>get_openurl</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#is_serial'>is_serial</a>
      <li class='indexItem indexItem3'><a href='#custom_cover_image_url'>custom_cover_image_url</a>
      <li class='indexItem indexItem3'><a href='#cover_images'>cover_images</a>
      <li class='indexItem indexItem3'><a href='#get_marc_notes'>get_marc_notes</a>
      <li class='indexItem indexItem3'><a href='#_get_marc_authors'>_get_marc_authors</a>
      <li class='indexItem indexItem3'><a href='#get_marc_contributors'>get_marc_contributors</a>
      <li class='indexItem indexItem3'><a href='#get_marc_authors'>get_marc_authors</a>
      <li class='indexItem indexItem3'><a href='#normalized_isbn'>normalized_isbn</a>
      <li class='indexItem indexItem3'><a href='#public_read_list'>public_read_list</a>
      <li class='indexItem indexItem3'><a href='#metadata_extractor'>metadata_extractor</a>
      <li class='indexItem indexItem3'><a href='#normalized_upc'>normalized_upc</a>
      <li class='indexItem indexItem3'><a href='#normalized_oclc'>normalized_oclc</a>
      <li class='indexItem indexItem3'><a href='#to_api'>to_api</a>
      <li class='indexItem indexItem3'><a href='#to_api_mapping'>to_api_mapping</a>
      <li class='indexItem indexItem3'><a href='#get_marc_host'>get_marc_host</a>
      <li class='indexItem indexItem3'><a href='#get_marc_host_only'>get_marc_host_only</a>
      <li class='indexItem indexItem3'><a href='#get_marc_relatedparts_only'>get_marc_relatedparts_only</a>
      <li class='indexItem indexItem3'><a href='#get_marc_hostinfo_only'>get_marc_hostinfo_only</a>
      <li class='indexItem indexItem3'><a href='#generate_marc_host_field'>generate_marc_host_field</a>
      <li class='indexItem indexItem3'><a href='#link_marc_host'>link_marc_host</a>
      <li class='indexItem indexItem3'><a href='#recalls'>recalls</a>
      <li class='indexItem indexItem3'><a href='#can_be_recalled'>can_be_recalled</a>
      <li class='indexItem indexItem3'><a href='#ratings'>ratings</a>
      <li class='indexItem indexItem3'><a href='#opac_summary_html'>opac_summary_html</a>
      <li class='indexItem indexItem3'><a href='#merge_with'>merge_with</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#Internal_methods'>Internal methods</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#type'>type</a>
    </ul>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Koha::Biblio - Koha Biblio Object class</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="API"
>API</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class_Methods"
>Class Methods</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="store"
>store</a></h3>

<p>Overloaded <i>store</i> method to set default values</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="metadata"
>metadata</a></h3>

<p>my $metadata = $biblio-&#62;metadata();</p>

<p>Returns a Koha::Biblio::Metadata object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="record"
>record</a></h3>

<p>my $record = $biblio-&#62;record();</p>

<p>Returns a Marc::Record object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="record_schema"
>record_schema</a></h3>

<p>my $schema = $biblio-&#62;record_schema();</p>

<p>Returns the record schema (MARC21,
USMARC or UNIMARC).</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="orders"
>orders</a></h3>

<p>my $orders = $biblio-&#62;orders();</p>

<p>Returns a Koha::Acquisition::Orders object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="uncancelled_orders"
>uncancelled_orders</a></h3>

<p>my $uncancelled_orders = $biblio-&#62;uncancelled_orders;</p>

<p>Returns acquisition orders related to this biblio that are not cancelled.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="acq_status"
>acq_status</a></h3>

<pre>    print $biblio-&#62;acq_status;

    This status can be:
    - unlinked:   not any linked order found in the system
    - acquired:   some lines are complete, rest is cancelled
    - cancelled:  all lines are cancelled
    - processing: some lines are active or new</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="tickets"
>tickets</a></h3>

<pre>  my $tickets = $biblio-&#62;tickets();</pre>

<p>Returns all tickets linked to the biblio</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="ill_requests"
>ill_requests</a></h3>

<pre>    my $ill_requests = $biblio-&#62;ill_requests();</pre>

<p>Returns a Koha::ILL::Requests object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="item_groups"
>item_groups</a></h3>

<p>my $item_groups = $biblio-&#62;item_groups();</p>

<p>Returns a Koha::Biblio::ItemGroups object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="can_article_request"
>can_article_request</a></h3>

<p>my $bool = $biblio-&#62;can_article_request( $borrower );</p>

<p>Returns true if article requests can be made for this record</p>

<p>$borrower must be a Koha::Patron object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="can_be_edited"
>can_be_edited</a></h3>

<pre>    if ( $biblio-&#62;can_be_edited( $patron ) ) { ... }</pre>

<p>Returns a boolean denoting whether the passed <i>$patron</i> meets the required conditions to manually edit the record.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="check_booking"
>check_booking</a></h3>

<pre>  my $bookable =
    $biblio-&#62;check_booking( { start_date =&#62; $datetime, end_date =&#62; $datetime, [ booking_id =&#62; $booking_id ] } );</pre>

<p>Returns a boolean denoting whether the passed booking can be made without clashing.</p>

<p>Optionally, you may pass a booking id to exclude from the checks; This is helpful when you are updating an existing booking.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="can_be_transferred"
>can_be_transferred</a></h3>

<p>$biblio-&#62;can_be_transferred({ to =&#62; $to_library, from =&#62; $from_library })</p>

<p>Checks if at least one item of a biblio can be transferred to given library.</p>

<p>This feature is controlled by two system preferences: UseBranchTransferLimits to enable / disable the feature BranchTransferLimitsType to use either an itemnumber or ccode as an identifier for setting the limitations</p>

<p>Performance-wise, it is recommended to use this method for a biblio instead of iterating each item of a biblio with Koha::Item-&#62;can_be_transferred().</p>

<p>Takes HASHref that can have the following parameters: MANDATORY PARAMETERS: $to : Koha::Library OPTIONAL PARAMETERS: $from : Koha::Library # if given, only items from that # holdingbranch are considered</p>

<p>Returns 1 if at least one of the item of a biblio can be transferred to $to_library, otherwise 0.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="pickup_locations"
>pickup_locations</a></h3>

<pre>    my $pickup_locations = $biblio-&#62;pickup_locations({ patron =&#62; $patron });</pre>

<p>Returns a Koha::Libraries set of possible pickup locations for this biblio&#39;s items, according to patron&#39;s home library and if item can be transferred to each pickup location.</p>

<p>Throws a <i>Koha::Exceptions::MissingParameter</i> exception if the <b>mandatory</b> parameter <i>patron</i> is not passed.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="hidden_in_opac"
>hidden_in_opac</a></h3>

<pre>    my $bool = $biblio-&#62;hidden_in_opac({ [ rules =&#62; $rules ] })</pre>

<p>Returns true if the biblio matches the hidding criteria defined in $rules. Returns false otherwise. It involves the <i>OpacHiddenItems</i> and <i>OpacHiddenItemsHidesRecord</i> system preferences.</p>

<p>Takes HASHref that can have the following parameters: OPTIONAL PARAMETERS: $rules : { &#60;field&#62; =&#62; [ value_1, ... ], ... }</p>

<p>Note: $rules inherits its structure from the parsed YAML from reading the <i>OpacHiddenItems</i> system preference.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="article_request_type"
>article_request_type</a></h3>

<p>my $type = $biblio-&#62;article_request_type( $borrower );</p>

<p>Returns the article request type based on items, or on the record itself if there are no items.</p>

<p>$borrower must be a Koha::Patron object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="article_request_type_for_bib"
>article_request_type_for_bib</a></h3>

<p>my $type = $biblio-&#62;article_request_type_for_bib</p>

<p>Returns the article request type &#39;yes&#39;, &#39;no&#39;, &#39;item_only&#39;, &#39;bib_only&#39;, for the given record</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="article_request_type_for_items"
>article_request_type_for_items</a></h3>

<p>my $type = $biblio-&#62;article_request_type_for_items</p>

<p>Returns the article request type &#39;yes&#39;, &#39;no&#39;, &#39;item_only&#39;, &#39;bib_only&#39;, for the given record&#39;s items</p>

<p>If there is a conflict where some items are &#39;bib_only&#39; and some are &#39;item_only&#39;, &#39;bib_only&#39; will be returned.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="article_requests"
>article_requests</a></h3>

<pre>    my $article_requests = $biblio-&#62;article_requests</pre>

<p>Returns the article requests associated with this biblio</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="current_checkouts"
>current_checkouts</a></h3>

<pre>    my $current_checkouts = $biblio-&#62;current_checkouts</pre>

<p>Returns the current checkouts associated with this biblio</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="old_checkouts"
>old_checkouts</a></h3>

<pre>    my $old_checkouts = $biblio-&#62;old_checkouts</pre>

<p>Returns the past checkouts associated with this biblio</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="items"
>items</a></h3>

<p>my $items = $biblio-&#62;items({ [ host_items =&#62; 1 ] });</p>

<p>The optional param host_items allows you to include &#39;analytical&#39; items.</p>

<p>Returns the related Koha::Items object for this biblio</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="bookable_items"
>bookable_items</a></h3>

<pre>  my $bookable_items = $biblio-&#62;bookable_items;</pre>

<p>Returns the related Koha::Items resultset filtered to those items that can be booked.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="host_items"
>host_items</a></h3>

<p>my $host_items = $biblio-&#62;host_items();</p>

<p>Return the host items (easy analytical record)</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="_host_itemnumbers"
>_host_itemnumbers</a></h3>

<p>my $host_itemnumber = $biblio-&#62;_host_itemnumbers();</p>

<p>Return the itemnumbers for analytical items on this record</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="itemtype"
>itemtype</a></h3>

<p>my $itemtype = $biblio-&#62;itemtype();</p>

<p>Returns the itemtype for this record.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="holds"
>holds</a></h3>

<p>my $holds = $biblio-&#62;holds();</p>

<p>return the current holds placed on this record</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="current_holds"
>current_holds</a></h3>

<p>my $holds = $biblio-&#62;current_holds</p>

<p>Return the holds placed on this bibliographic record. It does not include future holds.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="biblioitem"
>biblioitem</a></h3>

<p>my $field = $self-&#62;biblioitem</p>

<p>Returns the related Koha::Biblioitem object for this Biblio object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="bookings"
>bookings</a></h3>

<pre>  my $bookings = $item-&#62;bookings();</pre>

<p>Returns the bookings attached to this biblio.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="suggestions"
>suggestions</a></h3>

<p>my $suggestions = $self-&#62;suggestions</p>

<p>Returns the related Koha::Suggestions object for this Biblio object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="get_marc_components"
>get_marc_components</a></h3>

<pre>  my $components = $self-&#62;get_marc_components();</pre>

<p>Returns an array of search results data, which are component parts of this object (MARC21 773 points to this)</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_components_query"
>get_components_query</a></h2>

<p>Returns a query which can be used to search for all component parts of MARC21 biblios</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="get_marc_volumes"
>get_marc_volumes</a></h3>

<pre>  my $volumes = $self-&#62;get_marc_volumes();</pre>

<p>Returns an array of MARCXML data, which are volumes parts of this object (MARC21 773$w or 8xx$w point to this)</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_volumes_query"
>get_volumes_query</a></h2>

<p>Returns a query which can be used to search for all component parts of MARC21 biblios</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="subscriptions"
>subscriptions</a></h3>

<p>my $subscriptions = $self-&#62;subscriptions</p>

<p>Returns the related Koha::Subscriptions object for this Biblio object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="serials"
>serials</a></h3>

<p>my $serials = $self-&#62;serials</p>

<p>Returns the related Koha::Serials object for this Biblio object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="subscription_histories"
>subscription_histories</a></h3>

<p>my $subscription_histories = $self-&#62;subscription_histories</p>

<p>Returns the related Koha::Subscription::Histories object for this Biblio object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="has_items_waiting_or_intransit"
>has_items_waiting_or_intransit</a></h3>

<p>my $itemsWaitingOrInTransit = $biblio-&#62;has_items_waiting_or_intransit</p>

<p>Tells if this bibliographic record has items waiting or in transit.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_coins"
>get_coins</a></h2>

<p>my $coins = $biblio-&#62;get_coins;</p>

<p>Returns the COinS (a span) which can be included in a biblio record</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_openurl"
>get_openurl</a></h2>

<p>my $url = $biblio-&#62;get_openurl;</p>

<p>Returns url for OpenURL resolver set in OpenURLResolverURL system preference</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="is_serial"
>is_serial</a></h3>

<p>my $serial = $biblio-&#62;is_serial</p>

<p>Return boolean true if this bibbliographic record is continuing resource</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="custom_cover_image_url"
>custom_cover_image_url</a></h3>

<p>my $image_url = $biblio-&#62;custom_cover_image_url</p>

<p>Return the specific url of the cover image for this bibliographic record. It is built regaring the value of the system preference CustomCoverImagesURL</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="cover_images"
>cover_images</a></h3>

<p>Return the cover images associated with this biblio.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="get_marc_notes"
>get_marc_notes</a></h3>

<pre>    $marcnotesarray = $biblio-&#62;get_marc_notes({ opac =&#62; 1 });</pre>

<p>Get all notes from the MARC record and returns them in an array. The notes are stored in different fields depending on MARC flavour. MARC21 5XX $u subfields receive special attention as they are URIs.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="_get_marc_authors"
>_get_marc_authors</a></h3>

<p>Private method to return the list of authors contained in the MARC record. See get get_marc_contributors and get_marc_authors for the public methods.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="get_marc_contributors"
>get_marc_contributors</a></h3>

<pre>    my $contributors = $biblio-&#62;get_marc_contributors;</pre>

<p>Get all contributors (but first author) from the MARC record and returns them in an array. They are stored in different fields depending on MARC flavour (700..720 for MARC21)</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="get_marc_authors"
>get_marc_authors</a></h3>

<pre>    my $authors = $biblio-&#62;get_marc_authors;</pre>

<p>Get all authors from the MARC record and returns them in an array. They are stored in different fields depending on MARC flavour (main author from 100 then secondary authors from 700..720).</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="normalized_isbn"
>normalized_isbn</a></h3>

<pre>    my $normalized_isbn = $biblio-&#62;normalized_isbn</pre>

<p>Normalizes and returns the first valid ISBN found in the record. ISBN13 are converted into ISBN10. This is required to get some book cover images.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="public_read_list"
>public_read_list</a></h3>

<p>This method returns the list of publicly readable database fields for both API and UI output purposes</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="metadata_extractor"
>metadata_extractor</a></h3>

<pre>    my $extractor = $biblio-&#62;metadata_extractor</pre>

<p>Return a Koha::Biblio::Metadata::Extractor object to use to extract data from the metadata (ie. MARC record for now)</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="normalized_upc"
>normalized_upc</a></h3>

<pre>    my $normalized_upc = $biblio-&#62;normalized_upc</pre>

<p>Normalizes and returns the UPC value found in the MARC record.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="normalized_oclc"
>normalized_oclc</a></h3>

<pre>    my $normalized_oclc = $biblio-&#62;normalized_oclc</pre>

<p>Normalizes and returns the OCLC number found in the MARC record.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="to_api"
>to_api</a></h3>

<pre>    my $json = $biblio-&#62;to_api;</pre>

<p>Overloaded method that returns a JSON representation of the Koha::Biblio object, suitable for API output. The related Koha::Biblioitem object is merged as expected on the API.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="to_api_mapping"
>to_api_mapping</a></h3>

<p>This method returns the mapping for representing a Koha::Biblio object on the API.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="get_marc_host"
>get_marc_host</a></h3>

<pre>    $host = $biblio-&#62;get_marc_host;
    # OR:
    ( $host, $relatedparts, $hostinfo ) = $biblio-&#62;get_marc_host;

    Returns host biblio record from MARC21 773 (undef if no 773 present).
    It looks at the first 773 field with MARCorgCode or only a control
    number. Complete $w or numeric part is used to search host record.
    The optional parameter no_items triggers a check if $biblio has items.
    If there are, the sub returns undef.
    Called in list context, it also returns 773$g (related parts).

    If there is no $w, we use $0 (host biblionumber) or $9 (host itemnumber)
    to search for the host record. If there is also no $0 and no $9, we search
    using author and title. Failing all of that, we return an undef host and
    form a concatenation of strings with 773$agt for host information,
    returned when called in list context.</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="get_marc_host_only"
>get_marc_host_only</a></h3>

<pre>    my $host = $biblio-&#62;get_marc_host_only;</pre>

<p>Return host only</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="get_marc_relatedparts_only"
>get_marc_relatedparts_only</a></h3>

<pre>    my $relatedparts = $biblio-&#62;get_marc_relatedparts_only;</pre>

<p>Return related parts only</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="get_marc_hostinfo_only"
>get_marc_hostinfo_only</a></h3>

<pre>    my $hostinfo = $biblio-&#62;get_marc_hostinfo_only;</pre>

<p>Return host info only</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="generate_marc_host_field"
>generate_marc_host_field</a></h3>

<pre>  my $link_field = $biblio-&#62;generate_marc_host_field;
  $child-&#62;link_marc_host( $link_field );</pre>

<p>This method generates a MARC link field from the host record that can be added to child records to link them to the host record.</p>

<p>NOTE: This replicates and partially enhances C4::Biblio::prepare_marc_host(). We should merge functionality from C4::Biblio::PrepareMarcHost() too and then replace all calls to those methods with this one and remove those alternatives from the codebase.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="link_marc_host"
>link_marc_host</a></h3>

<pre>  $biblio-&#62;link_marc_host({ field =&#62; $link_field});
  $biblio-&#62;link_marc_host({ host =&#62; $biblio });
  $biblio-&#62;link_marc_host({ host =&#62; $biblionumber });</pre>

<p>Links a child MARC record to the parent. Expects either a pre-formed link field as generated by $parent-&#62;get_link_field, the biblio object or biblionumber of the host to link to.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="recalls"
>recalls</a></h3>

<pre>    my $recalls = $biblio-&#62;recalls;</pre>

<p>Return recalls linked to this biblio</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="can_be_recalled"
>can_be_recalled</a></h3>

<pre>    my @items_for_recall = $biblio-&#62;can_be_recalled({ patron =&#62; $patron_object });</pre>

<p>Does biblio-level checks and returns the items attached to this biblio that are available for recall</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="ratings"
>ratings</a></h3>

<pre>    my $ratings = $biblio-&#62;ratings</pre>

<p>Return a Koha::Ratings object representing the ratings of this bibliographic record</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="opac_summary_html"
>opac_summary_html</a></h3>

<pre>    my $summary_html = $biblio-&#62;opac_summary_html</pre>

<p>Based on the syspref OPACMySummaryHTML, returns a string representing the summary of this bibliographic record. {AUTHOR}, {TITLE}, {ISBN} and {BIBLIONUMBER} will be replaced.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="merge_with"
>merge_with</a></h3>

<pre>    my $biblio = Koha::Biblios-&#62;find($biblionumber);
    $biblio-&#62;merge_with(\@biblio_ids);

    This subroutine merges a list of bibliographic records into the bibliographic record.
    This function DOES NOT CHANGE the bibliographic metadata of the record. But it links all
    items, holds, subscriptions, serials issues and article_requests to the record. After doing changes
    bibliographic records listed are deleted</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Internal_methods"
>Internal methods</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="type"
>type</a></h3>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Kyle M Hall &#60;kyle@bywatersolutions.com&#62;</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
