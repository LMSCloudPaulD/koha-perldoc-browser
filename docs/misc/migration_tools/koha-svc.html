<html><head><title>Koha::SVC</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÉ</text></svg>" />

<link rel="stylesheet" href="../../sub.css">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.42,
  using Pod::Simple::PullParser v3.42,
  under Perl v5.034000 at Mon Nov  4 18:06:27 2024 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#USAGE'>USAGE</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new'>new</a>
    <li class='indexItem indexItem2'><a href='#get'>get</a>
    <li class='indexItem indexItem2'><a href='#post'>post</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#POD_ERRORS'>POD ERRORS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Koha::SVC</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Call Koha&#39;s <code>/svc/</code> API to fetch/update records</p>

<p>This script can be used from other scripts as <code>Koha::SVC</code> module or run directly using syntax:</p>

<pre>  koha-svc.pl http://koha-dev:8080/cgi-bin/koha/svc svc-user svc-password $biblionumber [bib-42.xml]</pre>

<p>If called without last argument (MARCXML filename) it will fetch <code>$biblionumber</code> from Koha and create <code>bib-$biblionumber.xml</code> file from it. When called with xml filename, it will update record in Koha.</p>

<p>This script is intentionally separate from Koha itself and dependencies which Koha has under assumption that you might want to run it on another machine (or create custom script which mungles Koha&#39;s records from other machine without bringing all Koha dependencies with it).</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="USAGE"
>USAGE</a></h1>

<p>This same script can be used as module (as it defines Koha::SVC package) using</p>

<pre>  require &#34;koha-svc.pl&#34;</pre>

<p>at beginning of script. Rest of API is described below. Example of its usage is at beginning of this script.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new"
>new</a></h2>

<pre>  my $svc = Koha::SVC-&#62;new(
    url      =&#62; &#39;http://koha-dev:8080/cgi-bin/koha/svc&#39;,
    user     =&#62; &#39;svc-user&#39;,
    password =&#62; &#39;svc-password&#39;,
  );</pre>

<p>URL must point to Koha&#39;s <b>intranet</b> address and port.</p>

<p>Specified user must have <code>editcatalogue</code> permission.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get"
>get</a></h2>

<pre>  my $marcxml = $svc-&#62;get( $biblionumber );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="post"
>post</a></h2>

<pre>  my $marcxml = $svc-&#62;post( $biblionumber, $marcxml );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="POD_ERRORS"
>POD ERRORS</a></h1>

<p>Hey! <b>The above document had some coding errors, which are explained below:</b></p>

<dl>
<dt><a name="Around_line_76:"
>Around line 76:</a></dt>

<dd>
<p>Deleting unknown formatting code T&#60;&#62;</p>
</dd>
</dl>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
