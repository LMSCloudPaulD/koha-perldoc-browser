<html><head><title>Koha::Objects</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÉ</text></svg>" />

<link rel="stylesheet" href="../sub.css">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.42,
  using Pod::Simple::PullParser v3.42,
  under Perl v5.034000 at Fri Feb 17 18:19:31 2023 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#API'>API</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Class_Methods'>Class Methods</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Koha%3A%3AObjects-%3Enew()%3B'>Koha::Objects-&#62;new();</a>
      <li class='indexItem indexItem3'><a href='#Koha%3A%3AObjects-%3E_new_from_dbic()%3B'>Koha::Objects-&#62;_new_from_dbic();</a>
      <li class='indexItem indexItem3'><a href='#Koha%3A%3AObjects-%3Efind()%3B'>Koha::Objects-&#62;find();</a>
      <li class='indexItem indexItem3'><a href='#Koha%3A%3AObjects-%3Efind_or_create()%3B'>Koha::Objects-&#62;find_or_create();</a>
      <li class='indexItem indexItem3'><a href='#search'>search</a>
      <li class='indexItem indexItem3'><a href='#search_related'>search_related</a>
      <li class='indexItem indexItem3'><a href='#delete'>delete</a>
      <li class='indexItem indexItem3'><a href='#update'>update</a>
      <li class='indexItem indexItem3'><a href='#filter_by_last_update'>filter_by_last_update</a>
      <li class='indexItem indexItem3'><a href='#single'>single</a>
      <li class='indexItem indexItem3'><a href='#Koha%3A%3AObjects-%3Enext()%3B'>Koha::Objects-&#62;next();</a>
      <li class='indexItem indexItem3'><a href='#Koha%3A%3AObjects-%3Elast%3B'>Koha::Objects-&#62;last;</a>
      <li class='indexItem indexItem3'><a href='#empty'>empty</a>
      <li class='indexItem indexItem3'><a href='#Koha%3A%3AObjects-%3Ereset()%3B'>Koha::Objects-&#62;reset();</a>
      <li class='indexItem indexItem3'><a href='#Koha%3A%3AObjects-%3Eas_list()%3B'>Koha::Objects-&#62;as_list();</a>
      <li class='indexItem indexItem3'><a href='#Koha%3A%3AObjects-%3Eunblessed'>Koha::Objects-&#62;unblessed</a>
      <li class='indexItem indexItem3'><a href='#Koha%3A%3AObjects-%3Eget_column'>Koha::Objects-&#62;get_column</a>
      <li class='indexItem indexItem3'><a href='#Koha%3A%3AObjects-%3ETO_JSON'>Koha::Objects-&#62;TO_JSON</a>
      <li class='indexItem indexItem3'><a href='#Koha%3A%3AObjects-%3Eto_api'>Koha::Objects-&#62;to_api</a>
      <li class='indexItem indexItem3'><a href='#attributes_from_api'>attributes_from_api</a>
      <li class='indexItem indexItem3'><a href='#from_api_mapping'>from_api_mapping</a>
      <li class='indexItem indexItem3'><a href='#prefetch_whitelist'>prefetch_whitelist</a>
      <li class='indexItem indexItem3'><a href='#Koha%3A%3AObjects-%3E_wrap'>Koha::Objects-&#62;_wrap</a>
      <li class='indexItem indexItem3'><a href='#Koha%3A%3AObjects-%3E_resultset'>Koha::Objects-&#62;_resultset</a>
      <li class='indexItem indexItem3'><a href='#columns'>columns</a>
      <li class='indexItem indexItem3'><a href='#AUTOLOAD'>AUTOLOAD</a>
      <li class='indexItem indexItem3'><a href='#_type'>_type</a>
      <li class='indexItem indexItem3'><a href='#object_class'>object_class</a>
    </ul>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Koha::Objects - Koha Object set base class</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use Koha::Objects;
    my $objects = Koha::Objects-&#62;search({ borrowernumber =&#62; $borrowernumber});</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This class must be subclassed.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="API"
>API</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class_Methods"
>Class Methods</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Koha::Objects-&#62;new();"
>Koha::Objects-&#62;new();</a></h3>

<p>my $object = Koha::Objects-&#62;new();</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Koha::Objects-&#62;_new_from_dbic();"
>Koha::Objects-&#62;_new_from_dbic();</a></h3>

<p>my $object = Koha::Objects-&#62;_new_from_dbic( $resultset );</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Koha::Objects-&#62;find();"
>Koha::Objects-&#62;find();</a></h3>

<p>Similar to DBIx::Class::ResultSet-&#62;find this method accepts: \%columns_values | @pk_values, { key =&#62; $unique_constraint, %attrs }? Strictly speaking, columns_values should only refer to columns under an unique constraint.</p>

<p>It returns undef if no results were found</p>

<p>my $object = Koha::Objects-&#62;find( { col1 =&#62; $val1, col2 =&#62; $val2 } ); my $object = Koha::Objects-&#62;find( $id ); my $object = Koha::Objects-&#62;find( $idpart1, $idpart2, $attrs ); # composite PK</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Koha::Objects-&#62;find_or_create();"
>Koha::Objects-&#62;find_or_create();</a></h3>

<p>my $object = Koha::Objects-&#62;find_or_create( $attrs );</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="search"
>search</a></h3>

<pre>    # scalar context
    my $objects = Koha::Objects-&#62;search([$params, $attributes]);
    while (my $object = $objects-&#62;next) {
        do_stuff($object);
    }</pre>

<p>This <b>instantiates</b> the <i>Koha::Objects</i> class, and generates a resultset based on the query <i>$params</i> and <i>$attributes</i> that are passed (like in DBIC).</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="search_related"
>search_related</a></h3>

<pre>    my $objects = Koha::Objects-&#62;search_related( $rel_name, $cond?, \%attrs? );</pre>

<p>Searches the specified relationship, optionally specifying a condition and attributes for matching records.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="delete"
>delete</a></h3>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="update"
>update</a></h3>

<pre>    my $objects = Koha::Objects-&#62;new; # or Koha::Objects-&#62;search
    $objects-&#62;update( $fields, [ { no_triggers =&#62; 0/1 } ] );</pre>

<p>This method overloads the DBIC inherited one so if code-level triggers exist (through the use of an overloaded <i>update</i> or <i>store</i> method in the Koha::Object based class) those are called in a loop on the resultset.</p>

<p>If <b>no_triggers</b> is passed and <i>true</i>, then the DBIC update method is called directly. This feature is important for performance, in cases where no code-level triggers should be triggered. The developer will explicitly ask for this and QA should catch wrong uses as well.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="filter_by_last_update"
>filter_by_last_update</a></h3>

<p>my $filtered_objects = $objects-&#62;filter_by_last_update</p>

<p>days exclusive by default (will be inclusive if days_inclusive is passed and set) from inclusive to inclusive</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="single"
>single</a></h3>

<p>my $object = Koha::Objects-&#62;search({}, { rows =&#62; 1 })-&#62;single</p>

<p>Returns one and only one object that is part of this set. Returns undef if there are no objects found.</p>

<p>This is optimal as it will grab the first returned result without instantiating a cursor.</p>

<p>See: http://search.cpan.org/dist/DBIx-Class/lib/DBIx/Class/Manual/Cookbook.pod#Retrieve_one_and_only_one_row_from_a_resultset</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Koha::Objects-&#62;next();"
>Koha::Objects-&#62;next();</a></h3>

<p>my $object = Koha::Objects-&#62;next();</p>

<p>Returns the next object that is part of this set. Returns undef if there are no more objects to return.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Koha::Objects-&#62;last;"
>Koha::Objects-&#62;last;</a></h3>

<p>my $object = Koha::Objects-&#62;last;</p>

<p>Returns the last object that is part of this set. Returns undef if there are no object to return.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="empty"
>empty</a></h3>

<pre>    my $empty_rs = Koha::Objects-&#62;new-&#62;empty;</pre>

<p>Sets the resultset empty. This is handy for consistency on method returns (e.g. if we know in advance we won&#39;t have results but want to keep returning an iterator).</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Koha::Objects-&#62;reset();"
>Koha::Objects-&#62;reset();</a></h3>

<p>Koha::Objects-&#62;reset();</p>

<p>resets iteration so the next call to next() will start agein with the first object in a set.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Koha::Objects-&#62;as_list();"
>Koha::Objects-&#62;as_list();</a></h3>

<p>Koha::Objects-&#62;as_list();</p>

<p>Returns an arrayref of the objects in this set.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Koha::Objects-&#62;unblessed"
>Koha::Objects-&#62;unblessed</a></h3>

<p>Returns an unblessed representation of objects.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Koha::Objects-&#62;get_column"
>Koha::Objects-&#62;get_column</a></h3>

<p>Return all the values of this set for a given column</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Koha::Objects-&#62;TO_JSON"
>Koha::Objects-&#62;TO_JSON</a></h3>

<p>Returns an unblessed representation of objects, suitable for JSON output.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Koha::Objects-&#62;to_api"
>Koha::Objects-&#62;to_api</a></h3>

<p>Returns a representation of the objects, suitable for API output .</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="attributes_from_api"
>attributes_from_api</a></h3>

<pre>    my $attributes = $objects-&#62;attributes_from_api( $api_attributes );</pre>

<p>Translates attributes from the API to DBIC</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="from_api_mapping"
>from_api_mapping</a></h3>

<pre>    my $mapped_attributes_hash = $objects-&#62;from_api_mapping;</pre>

<p>Attributes map from the API to DBIC</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="prefetch_whitelist"
>prefetch_whitelist</a></h3>

<pre>    my $whitelist = $object-&#62;prefetch_whitelist()</pre>

<p>Returns a hash of prefetchable subs and the type it returns</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Koha::Objects-&#62;_wrap"
>Koha::Objects-&#62;_wrap</a></h3>

<p>wraps the DBIC object in a corresponding Koha object</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Koha::Objects-&#62;_resultset"
>Koha::Objects-&#62;_resultset</a></h3>

<p>Returns the internal resultset or creates it if undefined</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="columns"
>columns</a></h3>

<p>my @columns = Koha::Objects-&#62;columns</p>

<p>Return the table columns</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="AUTOLOAD"
>AUTOLOAD</a></h3>

<p>The autoload method is used call DBIx::Class method on a resultset.</p>

<p>Important: If you plan to use one of the DBIx::Class methods you must provide relevant tests in t/db_dependent/Koha/Objects.t Currently count, is_paged, pager, result_class, single and slice are covered.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="_type"
>_type</a></h3>

<p>The _type method must be set for all child classes. The value returned by it should be the DBIC resultset name. For example, for holds, _type should return &#39;Reserve&#39;.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="object_class"
>object_class</a></h3>

<p>This method must be set for all child classes. The value returned by it should be the name of the Koha object class that is returned by this class. For example, for holds, object_class should return &#39;Koha::Hold&#39;.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Kyle M Hall &#60;kyle@bywatersolutions.com&#62;</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
