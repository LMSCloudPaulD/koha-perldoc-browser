<html><head><title>bulkmarcimport.pl</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÉ</text></svg>" />

<link rel="stylesheet" href="../../sub.css">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.42,
  using Pod::Simple::PullParser v3.42,
  under Perl v5.034000 at Mon Jul 24 06:26:43 2023 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#USAGE'>USAGE</a>
  <li class='indexItem indexItem1'><a href='#WARNING'>WARNING</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>bulkmarcimport.pl - Import bibliographic/authority records into Koha</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="USAGE"
>USAGE</a></h1>

<pre> $ export KOHA_CONF=/etc/koha.conf
 $ perl misc/migration_tools/bulkmarcimport.pl -d -commit 1000 \\
    -file /home/jmf/koha.mrc -n 3000</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="WARNING"
>WARNING</a></h1>

<p>Don&#39;t use this script before you&#39;ve entered and checked your MARC parameters tables twice (or more!). Otherwise, the import won&#39;t work correctly and you will get invalid data.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<dl>
<dt><a name="-h"
><b>-h</b></a></dt>

<dd>
<p>This version/help screen</p>

<dt><a name="-b,_-biblios"
><b>-b, -biblios</b></a></dt>

<dd>
<p>Type of import: bibliographic records</p>

<dt><a name="-a,_-authorities"
><b>-a, -authorities</b></a></dt>

<dd>
<p>Type of import: authority records</p>

<dt><a name="-file=FILE"
><b>-file</b>=<i>FILE</i></a></dt>

<dd>
<p>The <i>FILE</i> to import</p>

<dt><a name="-v"
><b>-v</b></a></dt>

<dd>
<p>Verbose mode. 1 means &#34;some infos&#34;, 2 means &#34;MARC dumping&#34;</p>

<dt><a name="-fk"
><b>-fk</b></a></dt>

<dd>
<p>Turn off foreign key checks during import.</p>

<dt><a name="-n=NUMBER"
><b>-n</b>=<i>NUMBER</i></a></dt>

<dd>
<p>The <i>NUMBER</i> of records to import. If missing, all the file is imported</p>

<dt><a name="-o,_-offset=NUMBER"
><b>-o, -offset</b>=<i>NUMBER</i></a></dt>

<dd>
<p>File offset before importing, ie <i>NUMBER</i> of records to skip.</p>

<dt><a name="-commit=NUMBER"
><b>-commit</b>=<i>NUMBER</i></a></dt>

<dd>
<p>The <i>NUMBER</i> of records to wait before performing a &#39;commit&#39; operation</p>

<dt><a name="-l"
><b>-l</b></a></dt>

<dd>
<p>File logs actions done for each record and their status into file</p>

<dt><a name="-append"
><b>-append</b></a></dt>

<dd>
<p>If specified, data will be appended to the logfile. If not, the logfile will be erased for each execution.</p>

<dt><a name="-t,_-test"
><b>-t, -test</b></a></dt>

<dd>
<p>Test mode: parses the file, saying what it would do, but doing nothing.</p>

<dt><a name="-s"
><b>-s</b></a></dt>

<dd>
<p>Skip automatic conversion of MARC-8 to UTF-8. This option is provided for debugging.</p>

<dt><a name="-c=CHARACTERISTIC"
><b>-c</b>=<i>CHARACTERISTIC</i></a></dt>

<dd>
<p>The <i>CHARACTERISTIC</i> MARC flavour. At the moment, only <i>MARC21</i> and <i>UNIMARC</i> are supported. MARC21 by default.</p>

<dt><a name="-d"
><b>-d</b></a></dt>

<dd>
<p>Delete EVERYTHING related to biblio in koha-DB before import. Tables: biblio, biblioitems, items</p>

<dt><a name="-m=FORMAT"
><b>-m</b>=<i>FORMAT</i></a></dt>

<dd>
<p>Input file <i>FORMAT</i>: <i>MARCXML</i> or <i>ISO2709</i> (defaults to ISO2709)</p>

<dt><a name="-authtypes"
><b>-authtypes</b></a></dt>

<dd>
<p>file yamlfile with authoritiesTypes and distinguishable record field in order to store the correct authtype</p>

<dt><a name="-yaml"
><b>-yaml</b></a></dt>

<dd>
<p>yaml file format a yaml file with ids</p>

<dt><a name="-filter"
><b>-filter</b></a></dt>

<dd>
<p>list of fields that will not be imported. Can be any from 000 to 999 or field, subfield and subfield&#39;s matching value such as 200avalue</p>

<dt><a name="-insert"
><b>-insert</b></a></dt>

<dd>
<p>if set, only insert when possible</p>

<dt><a name="-update"
><b>-update</b></a></dt>

<dd>
<p>if set, only updates (any biblio should have a matching record)</p>

<dt><a name="-all"
><b>-all</b></a></dt>

<dd>
<p>if set, do whatever is required</p>

<dt><a name="-k,_-keepids=&#60;FIELD&#62;"
><b>-k, -keepids</b>=&#60;FIELD&#62;</a></dt>

<dd>
<p>Field store ids in <i>FIELD</i> (useful for authorities, where 001 contains the authid for Koha, that can contain a very valuable info for authorities coming from LOC or BNF. useless for biblios probably)</p>

<dt><a name="-match=&#60;FIELD&#62;"
><b>-match</b>=&#60;FIELD&#62;</a></dt>

<dd>
<p><i>FIELD</i> matchindex,fieldtomatch matchpoint to use to deduplicate fieldtomatch can be either 001 to 999 or field and list of subfields as such 100abcde</p>

<dt><a name="-i,-isbn"
><b>-i,-isbn</b></a></dt>

<dd>
<p>If set, a search will be done on isbn, and, if the same isbn is found, the biblio is not added. It&#39;s another method to deduplicate. <b>-match</b> &#38; <b>-isbn</b> can be both set.</p>

<dt><a name="-cleanisbn"
><b>-cleanisbn</b></a></dt>

<dd>
<p>Clean ISBN fields from entering biblio records, ie removes hyphens. By default, ISBN are cleaned. --nocleanisbn will keep ISBN unchanged.</p>

<dt><a name="-x=TAG"
><b>-x</b>=<i>TAG</i></a></dt>

<dd>
<p>Source bib <i>TAG</i> for reporting the source bib number</p>

<dt><a name="-y=SUBFIELD"
><b>-y</b>=<i>SUBFIELD</i></a></dt>

<dd>
<p>Source <i>SUBFIELD</i> for reporting the source bib number</p>

<dt><a name="-idmap=FILE"
><b>-idmap</b>=<i>FILE</i></a></dt>

<dd>
<p><i>FILE</i> for the koha bib and source id</p>

<dt><a name="-keepids"
><b>-keepids</b></a></dt>

<dd>
<p>Store ids in 009 (useful for authorities, where 001 contains the authid for Koha, that can contain a very valuable info for authorities coming from LOC or BNF. useless for biblios probably)</p>

<dt><a name="-dedupbarcode"
><b>-dedupbarcode</b></a></dt>

<dd>
<p>If set, whenever a duplicate barcode is detected, it is removed and the attempt to add the record is retried, thereby giving the record a blank barcode. This is useful when something has set barcodes to be a biblio ID, or similar (usually other software.)</p>

<dt><a name="-framework"
><b>-framework</b></a></dt>

<dd>
<p>This is the code for the framework that the requested records will have attached to them when they are created. If not specified, then the default framework will be used.</p>

<dt><a name="-custom=MODULE"
><b>-custom</b>=<i>MODULE</i></a></dt>

<dd>
<p>This parameter allows you to use a local module with a customize subroutine that is called for each MARC record. If no filename is passed, LocalChanges.pm is assumed to be in the migration_tools subdirectory. You may pass an absolute file name or a file name from the migration_tools directory.</p>

<dt><a name="-marcmodtemplate=TEMPLATE"
><b>-marcmodtemplate</b>=<i>TEMPLATE</i></a></dt>

<dd>
<p>This parameter allows you to specify the name of an existing MARC modification template to apply as the MARC records are imported (these templates are created in the &#34;MARC modification templates&#34; tool in Koha). If not specified, no MARC modification templates are used (default).</p>
</dd>
</dl>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
