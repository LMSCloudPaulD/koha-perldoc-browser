<html><head><title>Koha::ILL::ILL::Request::Logger</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÉ</text></svg>" />

<link rel="stylesheet" href="../../../sub.css">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.42,
  using Pod::Simple::PullParser v3.42,
  under Perl v5.034000 at Fri Nov  1 06:07:25 2024 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#API'>API</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Class_Methods'>Class Methods</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#new'>new</a>
      <li class='indexItem indexItem3'><a href='#log_maybe'>log_maybe</a>
      <li class='indexItem indexItem3'><a href='#log_patron_notice'>log_patron_notice</a>
      <li class='indexItem indexItem3'><a href='#log_status_change'>log_status_change</a>
      <li class='indexItem indexItem3'><a href='#log_something'>log_something</a>
      <li class='indexItem indexItem3'><a href='#get_log_template'>get_log_template</a>
      <li class='indexItem indexItem3'><a href='#get_request_logs'>get_request_logs</a>
    </ul>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Koha::ILL::ILL::Request::Logger - Koha ILL Action / Event logger</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>Object-oriented class that provides event logging functionality for ILL requests</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This class provides the ability to log arbitrary actions or events relating to Illrequest to the action log.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="API"
>API</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class_Methods"
>Class Methods</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="new"
>new</a></h3>

<pre>    my $config = Koha::ILL::Request::Logger-&#62;new();</pre>

<p>Create a new Koha::ILL::Request::Logger object . We also set up what can be logged, how to do it and how to display log entries we get back out</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="log_maybe"
>log_maybe</a></h3>

<pre>    Koha::ILL::Request::Logger-&#62;log_maybe($params);</pre>

<p>Receive params hashref, containing a request object and an attrs hashref (which may or may not be defined) If the attrs hashref contains a key matching our &#34;loggers&#34; hashref then we want to log it</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="log_patron_notice"
>log_patron_notice</a></h3>

<pre>    Koha::ILL::Request::Logger-&#62;log_patron_notice($params);</pre>

<p>Receive a hashref containing a request object and params to log, and log it</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="log_status_change"
>log_status_change</a></h3>

<pre>    Koha::ILL::Request::Logger-&#62;log_status_change($params);</pre>

<p>Receive a hashref containing a request object and a status to log, and log it</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="log_something"
>log_something</a></h3>

<pre>    Koha::ILL::Request::Logger-&#62;log_something({
        modulename   =&#62; &#39;ILL&#39;,
        actionname   =&#62; &#39;STATUS_CHANGE&#39;,
        objectnumber =&#62; $req-&#62;id,
        infos        =&#62; to_json({
            log_origin    =&#62; &#39;core&#39;,
            status_before =&#62; $req-&#62;{previous_status},
            status_after  =&#62; $new_status
        })
    });</pre>

<p>If we have the required data passed, log an action</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="get_log_template"
>get_log_template</a></h3>

<pre>    $template_path = get_log_template($params);</pre>

<p>Given a log&#39;s origin and action, get the appropriate display template</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="get_request_logs"
>get_request_logs</a></h3>

<pre>    $requestlogs = Koha::ILL::Request::Logger-&#62;get_request_logs($request_id);</pre>

<p>Get all logged actions for a given request</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Andrew Isherwood &#60;andrew.isherwood@ptfs-europe.com&#62;</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
