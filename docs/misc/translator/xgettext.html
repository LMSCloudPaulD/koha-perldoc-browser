<html><head><title>xgettext.pl</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÉ</text></svg>" />

<link rel="stylesheet" href="../../sub.css">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.42,
  using Pod::Simple::PullParser v3.42,
  under Perl v5.034000 at Thu Feb  8 18:09:54 2024 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Strings_inside_JavaScript'>Strings inside JavaScript</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#BUGS'>BUGS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>xgettext.pl - xgettext(1)-like interface for .tt strings extraction</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This script has behaviour similar to xgettext(1),
and generates gettext-compatible output files.</p>

<p>A gettext-like format provides the following advantages:</p>

<dl>
<dt><a name="-"
>-</a></dt>

<dd>
<p>Translation to non-English-like languages with different word order: gettext&#39;s c-format strings can theoretically be emulated if we are able to do some analysis on the .tt input and treat &#60;TMPL_VAR&#62; in a way similar to %s.</p>

<dt><a name="-"
>-</a></dt>

<dd>
<p>Context for the extracted strings: the gettext format provides the filenames and line numbers where each string can be found.
The translator can read the source file and see the context,
in case the string by itself can mean several different things.</p>

<dt><a name="-"
>-</a></dt>

<dd>
<p>Place for the translator to add comments about the translations.</p>

<dt><a name="-"
>-</a></dt>

<dd>
<p>Gettext-compatible tools,
if any,
might be usable if we adopt the gettext format.</p>
</dd>
</dl>

<p>This script has already been in use for over a year and should be reasonable stable.
Nevertheless,
it is still somewhat experimental and there are still some issues.</p>

<p>Please refer to the explanation in tmpl_process3 for further details.</p>

<p>If you want to generate GNOME-style POTFILES.in files,
such files (passed to -f) can be generated thus:</p>

<pre>    (cd ../.. &#38;&#38; find koha-tmpl/opac-tmpl/default/en \
        -name \*.inc -o -name \*.tt) &#62; opac/POTFILES.in
    (cd ../.. &#38;&#38; find koha-tmpl/intranet-tmpl/default/en \
        -name \*.inc -o -name \*.tt) &#62; intranet/POTFILES.in</pre>

<p>This is, however, quite pointless, because the &#34;create&#34; and &#34;update&#34; actions have already been implemented in tmpl_process3.pl.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Strings_inside_JavaScript"
>Strings inside JavaScript</a></h2>

<p>In the SCRIPT elements, the script will attempt to scan for _(&#34;<i>string literal</i>&#34;) patterns, and extract the <i>string literal</i> as a translatable string.</p>

<p>Note that the C-like _(...) notation is required.</p>

<p>The JavaScript must actually define a _ function so that the code remains correct JavaScript. A suitable definition of such a function can be</p>

<pre>        function _(s) { return s } // dummy function for gettext</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p>tmpl_process3.pl, xgettext(1), Locale::PO(3), translator_doc.txt</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS</a></h1>

<p>There probably are some. Bugs related to scanning of &#60;INPUT&#62; tags seem to be especially likely to be present.</p>

<p>Its diagnostics are probably too verbose.</p>

<p>When a &#60;TMPL_VAR&#62; within a JavaScript-related attribute is detected, the script currently displays no warnings at all. It might be good to display some kind of warning.</p>

<p>Its sort order (-s option) seems to be different than the real xgettext(1)&#39;s sort option. This will result in translation strings inside the generated PO file spuriously moving about when tmpl_process3.pl calls msgmerge(1) to update the PO file.</p>

<p>If a Javascript string has leading spaces, it will generate strings with spurious leading spaces, leading to failure to match the strings when actually generating translated files.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
