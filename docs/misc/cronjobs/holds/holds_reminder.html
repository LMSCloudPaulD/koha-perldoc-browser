<html><head><title>holds_reminder.pl</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçÉ</text></svg>" />

<link rel="stylesheet" href="../../../sub.css">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.35,
  using Pod::Simple::PullParser v3.35,
  under Perl v5.030000 at Thu Dec  8 01:11:59 2022 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#OPTIONS'>OPTIONS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Configuration'>Configuration</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#USAGE_EXAMPLES'>USAGE EXAMPLES</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>holds_reminder.pl - prepare reminder messages to be sent to patrons with waiting holds</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>holds_reminder.pl -lettercode &#60;notice to send&#62; [ -c ][ -v ][ -library &#60;branchcode&#62; ][ -library &#60;branchcode&#62; ...
] [ -days &#60;number of days&#62; ][ -mtt &#60;transport type&#62; ...
][ -holidays ] [ -date &#60;YYYY-MM-DD&#62; ]</p>

<pre> Options:
   -help                          brief help message
   -man                           full documentation
   -v                             verbose
   -c --confirm                   confirm, if not set no email will be sent
   -days          &#60;days&#62;          days waiting to deal with
   -t --triggered                 include only holds &#60;days&#62; days waiting, and not longer
   -lettercode   &#60;lettercode&#62;     predefined notice to use, default is HOLD_REMINDER
   -library      &#60;branchname&#62;     only deal with holds from this library (repeatable : several libraries can be given)
   -holidays                      use the calendar to not count holidays as waiting days
   -mtt          &#60;message_transport_type&#62; type of messages to send, default is to use patrons messaging preferences for Hold reminder
                                  populating this will force send even if patron has not chosen to receive hold notices
                                  email and sms will fallback to print if borrower does not have an address/phone
   -date                          Send notices as would have been sent on a specific date</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Print a brief help message and exits.</p>

<dt><a name="-man"
><b>-man</b></a></dt>

<dd>
<p>Prints the manual page and exits.</p>

<dt><a name="-v"
><b>-v</b></a></dt>

<dd>
<p>Verbose. Without this flag set, only fatal errors are reported.</p>

<dt><a name="--confirm_|_-c"
><b>--confirm | -c</b></a></dt>

<dd>
<p>Confirm. Unless set this script does not send any email (test-mode). If verbose and not confirm a list of notices that would have been sent to the patrons are printed to standard out.</p>

<dt><a name="-days"
><b>-days</b></a></dt>

<dd>
<p>Optional parameter, number of days an items has been &#39;waiting&#39; on hold to send a message for. If not included a notice will be sent to all patrons with waiting holds.</p>

<dt><a name="-triggered"
><b>-triggered</b></a></dt>

<dd>
<p>Optional parameter, only send notices for holds exactly &#60;days&#62; waiting. If not included a notice will be sent to all patrons with waiting holds equal to OR greater than &#60;days&#62;. This option is useful if the cron is being run daily to avoid spamming the patrons.</p>

<dt><a name="-lettercode"
><b>-lettercode</b></a></dt>

<dd>
<p>Optional parameter, choose a notice to use. Default is &#39;HOLD_REMINDER&#39;.</p>

<dt><a name="-library"
><b>-library</b></a></dt>

<dd>
<p>select notices for one specific library. Use the value in the branches.branchcode table. This option can be repeated in order to select notices for a group of libraries.</p>

<dt><a name="-holidays"
><b>-holidays</b></a></dt>

<dd>
<p>This option determines whether library holidays are used when calculating how long an item has been waiting. If enabled the count will skip closed days.</p>

<dt><a name="-date"
><b>-date</b></a></dt>

<dd>
<p>use it in order to send notices on a specific date and not Now. Format: YYYY-MM-DD.</p>

<dt><a name="-mtt"
><b>-mtt</b></a></dt>

<dd>
<p>send a notices via a specific transport, this can be repeated to send various notices. If omitted the patron&#39;s messaging preferences for Hold notices will be used. If supplied the notice types will be force sent even if patron has not selected hold notices Email and SMS will fall back to print if there is no valid info in the patron&#39;s account</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This script is designed to alert patrons of waiting holds.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Configuration"
>Configuration</a></h2>

<p>This script sends reminders to patrons with waiting holds using a notice defined in the Tools &#62; Notices and slips module within Koha. The lettercode is passed into this script and, along with other options, determine the content of the notices sent to patrons.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="USAGE_EXAMPLES"
>USAGE EXAMPLES</a></h1>

<p><code>holds_reminder.pl</code> - With no arguments the simple help is printed</p>

<p><code>holds_reminder.pl </code> In this most basic usage all libraries are processed individually, and notices are prepared for all patrons with waiting holds for whom we have email addresses. Messages for those patrons for whom we have no email address are sent in a single attachment to the library administrator&#39;s email address, or to the address in the KohaAdminEmailAddress system preference.</p>

<p><code>holds_reminder.pl -n -csv /tmp/holds_reminder.csv</code> - sends no email and populates <em>/tmp/holds_reminder.csv</em> with information about all waiting holds items.</p>

<p><code>holds_reminder.pl -library MAIN -days 14</code> - prepare notices of holds waiting for 2 weeks for the MAIN library.</p>

<p><code>holds_reminder.pl -lettercode LATE_HOLDS -library MAIN -days 14</code> - prepare notices of holds waiting for 2 weeks for the MAIN library. Use lettercode &#39;LATE_HOLDS&#39;</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
